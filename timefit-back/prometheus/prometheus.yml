global:
  scrape_interval: 15s      # 15초마다 메트릭 수집
  evaluation_interval: 15s  # 15초마다 규칙 평가
  external_labels:
    monitor: 'timefit-monitor'

# Alertmanager 설정 (나중에 추가 가능)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['alertmanager:9093']

scrape_configs:
  # Prometheus 자체 모니터링
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Spring Boot Actuator (호스트에서 실행)
  - job_name: 'timefit-backend'
    metrics_path: '/actuator/prometheus'
    scrape_interval: 5s  # 성능 테스트 시 더 짧은 간격
    static_configs:
      - targets: ['host.docker.internal:8080']
        labels:
          application: 'timefit'
          environment: 'local'
    # 메트릭 릴레이블링 (선택사항)
    metric_relabel_configs:
      # JVM 메트릭 중 일부만 수집하고 싶을 때
      # - source_labels: [__name__]
      #   regex: 'jvm_.*'
      #   action: keep

  # Nginx Exporter
  - job_name: 'nginx'
    scrape_interval: 5s
    static_configs:
      - targets: [ 'nginx-exporter:9113' ]
        labels:
          application: 'timefit'
          component: 'nginx'