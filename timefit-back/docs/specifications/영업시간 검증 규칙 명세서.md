# 영업시간 검증 규칙 명세서

---

## 1. 개요

본 문서는 Timefit 예약 관리 시스템의 영업시간 입력 시 적용되는 검증 규칙을 정의한다.

영업시간 데이터는 계층적 구조를 가지며, 하위 데이터는 상위 데이터의 제약을 준수해야 한다. 본 명세서는 사용자가 영업시간을 입력하거나 수정할 때 시스템이 검증해야 할 규칙을 명확히 정의하여, 데이터 무결성을 보장하고 예약 시스템의 안정적인 운영을 지원한다.

**적용 범위:**
- 영업 시간(BusinessHours) 등록 및 수정
- 예약 가능 시간대(OperatingHours) 등록 및 수정
- 영업일/휴무일 전환


---

### **영업 시간 (BusinessHours) 규칙**

| 규칙 ID | 명칭 | 내용 |
|---------|------|------|
| **BH-01** | 시간 순서 | closeTime > openTime |
| **BH-02** | 휴무일 시간 정보 | 휴무일(isClosed=true)은 시간 무시 |
| **BH-03** | 하위 데이터 보호 | 축소 시 기존 OperatingHours가 범위 내에 있어야 함 |
| **BH-04** | 휴무일 전환 (유연) | 예약 존재 여부 무관, 즉시 전환 가능 |

### **예약 가능 시간대 (OperatingHours) 규칙**

| 규칙 ID | 명칭 | 내용 |
|---------|------|------|
| **OH-01** | 상위 범위 제약 | OH ⊆ BH (영업 시간 범위 내에만 등록) |
| **OH-02** | 동일 요일 겹침 금지 | 같은 요일 시간대끼리 중복 불가 |
| **OH-03** | 수정 시 자기 제외 | 수정 시 자기 자신은 겹침 검사 제외 |
| **OH-04** | 브레이크타임 표현 | sequence로 분리 (점심시간 등) |
| **OH-05** | 진행 중인 예약 보호 | 진행 중인 예약 있으면 변경 불가 |

---

## 2. 용어 정의

### 2.1 예약 상태

예약(Reservation)은 상태(status)에 따라 다음과 같이 분류된다.

| 상태 | 영문 코드 | 설명 | 분류 |
|------|----------|------|------|
| 확정 대기 | PENDING | 고객이 신청했으나 업체 확정 대기 중 | 진행 중 |
| 확정됨 | CONFIRMED | 업체가 확정한 예약 | 진행 중 |
| 완료됨 | COMPLETED | 서비스 제공 완료 | 완료 |
| 취소됨 | CANCELLED | 고객 또는 업체가 취소 | 완료 |
| 노쇼 | NO_SHOW | 고객 미방문 | 완료 |

---

### 2.2 진행 중인 예약

**정의:**

다음 두 조건을 모두 만족하는 예약을 "진행 중인 예약"으로 정의한다.

1. **시간 조건:** 예약 날짜가 오늘 이후 (reservationDate ≥ 오늘)
2. **상태 조건:** 예약 상태가 PENDING 또는 CONFIRMED

**예시 (기준일: 2025-01-05):**

| 예약일 | 상태 | 진행 중 여부 | 판단 근거 |
|--------|------|-------------|----------|
| 2025-01-10 | CONFIRMED | ✅ 진행 중 | 미래 + 확정됨 |
| 2025-01-10 | PENDING | ✅ 진행 중 | 미래 + 대기 중 |
| 2025-01-05 | CONFIRMED | ✅ 진행 중 | 오늘 = 미래로 간주 |
| 2024-12-20 | COMPLETED | ❌ 완료 | 과거 + 완료됨 |
| 2025-01-10 | CANCELLED | ❌ 완료 | 미래이나 이미 취소됨 |

---

### 2.3 과거/미래 예약

| 구분 | 정의 | 시스템 영향 | 데이터 보존 |
|------|------|------------|------------|
| 과거 예약 | 예약 날짜가 오늘 이전 | 없음 (이미 처리됨) | 보존 (통계/증빙용) |
| 미래 예약 | 예약 날짜가 오늘 이후 | 있음 (고객 약속) | 보존 필수 |

---

## 3. 데이터 구조

### 3.1 계층 관계

영업시간 데이터는 4개 계층으로 구성되며, 상위 계층이 하위 계층의 범위를 제한한다.

```
Level 1: 영업 시간 (BusinessHours)
         │
         │ 제약: OperatingHours ⊆ BusinessHours
         ↓
Level 2: 예약 가능 시간대 (OperatingHours)
         │
         │ 기반: BookingSlot 생성
         ↓
Level 3: 예약 슬롯 (BookingSlot)
         │
         │ 제약: 유효한 슬롯만 예약 가능
         ↓
Level 4: 고객 예약 (Reservation)
```

**계층별 역할:**

| 계층 | 명칭 | 역할 | 예시 |
|------|------|------|------|
| Level 1 | BusinessHours | 업체의 전체 영업 시간 범위 | 월요일 09:00~18:00 |
| Level 2 | OperatingHours | 실제 예약 받을 수 있는 세부 시간대 | 09:00~12:00, 13:00~18:00 |
| Level 3 | BookingSlot | 메뉴별 예약 가능한 구체적 슬롯 | 헤어커트(60분): 09:00, 10:00, 11:00 |
| Level 4 | Reservation | 고객의 실제 예약 | A고객: 2025-01-05 09:00 |

---

### 4.2 제약 원칙

#### 원칙 1: 포함 관계

하위 계층의 시간 범위는 반드시 상위 계층의 시간 범위 내에 위치해야 한다.

```
┌──────────────────────────────────────────┐
│ BusinessHours: 09:00 ─────────── 18:00   │
│                                           │
│  ┌────────────┐      ┌──────────────┐   │
│  │ OH: 09:00  │      │ OH: 13:00    │   │
│  │   ~ 12:00  │      │   ~ 18:00    │   │
│  └────────────┘      └──────────────┘   │
└──────────────────────────────────────────┘

✅ 정상: OperatingHours가 BusinessHours 내부에 위치
```

```
┌──────────────────────────────────────────┐
│ BusinessHours: 09:00 ─────────── 18:00   │
│                                           │
│  ┌────────────┐                          │
│  │ OH: 08:00  │ ← 범위 초과!             │
└──┼────────────┼──────────────────────────┘
   │   ~ 10:00  │
   └────────────┘

❌ 오류: 08:00는 영업 시작(09:00)보다 이름
```

---

#### 원칙 2: 겹침 금지

동일 요일의 예약 가능 시간대는 서로 겹치지 않아야 한다.

```
월요일
┌─────────────────────────────────────┐
│ 09:00 ──── 12:00    13:00 ──── 18:00│
│    ①                    ②          │
└─────────────────────────────────────┘
          12:00~13:00 = 브레이크타임

✅ 정상: 두 시간대가 겹치지 않음
```

```
월요일
┌─────────────────────────────────────┐
│ 09:00 ──── 12:00                    │
│    ①        ↓                       │
│          10:00 ──── 13:00 ← 겹침!   │
│             ③                       │
└─────────────────────────────────────┘

❌ 오류: ①과 ③이 10:00~12:00 구간에서 겹침
```

---

#### 원칙 3: 순차성

예약 가능 시간대가 여러 개일 경우, 시간 순서대로 배치되어야 한다.

```
월요일
┌─────────────────────────────────────┐
│ 09:00 ──── 12:00    13:00 ──── 18:00│
│  sequence=0         sequence=1      │
└─────────────────────────────────────┘

✅ 정상: sequence 순서 = 시간 순서
```

---

## 4. 검증 규칙

### 4.1 영업 시간(BusinessHours)

#### 4.1.1 기본 검증

**규칙 BH-01: 시간 순서**

종료 시간은 시작 시간보다 늦어야 한다.

```
조건: closeTime > openTime
```

| 시작 시간 | 종료 시간 | 결과 | 사유 |
|----------|----------|------|------|
| 09:00 | 18:00 | ✅ 정상 | 종료가 시작보다 늦음 |
| 18:00 | 09:00 | ❌ 오류 | 역순 |
| 09:00 | 09:00 | ❌ 오류 | 동일 시각 |

**오류 메시지:**
```
"영업 종료 시간은 시작 시간보다 늦어야 합니다."
```

---

#### 4.1.2 휴무일 처리

**규칙 BH-02: 휴무일 시간 정보**

휴무일로 설정된 경우, 시작/종료 시간은 무시된다.

| 휴무 여부 | 시작 시간 | 종료 시간 | 결과 | 비고 |
|----------|----------|----------|------|------|
| 휴무 | null | null | ✅ 정상 | 권장 방식 |
| 휴무 | 09:00 | 18:00 | ✅ 정상 | 시간 정보 무시됨 |
| 영업 | 09:00 | 18:00 | ✅ 정상 | 시간 정보 필수 |
| 영업 | null | 18:00 | ❌ 오류 | 시간 정보 누락 |

**오류 메시지:**
```
"영업일로 설정하려면 영업 시작/종료 시간을 입력해주세요."
```

---

### 4.2 예약 가능 시간대(OperatingHours)

#### 4.2.1 영업 시간 범위 준수

**규칙 OH-01: 상위 범위 제약**

예약 가능 시간대는 해당 요일의 영업 시간 범위를 벗어날 수 없다.

```
검증 조건:
  1. OperatingHours.openTime ≥ BusinessHours.openTime
  2. OperatingHours.closeTime ≤ BusinessHours.closeTime
```

**예시: 월요일 영업 시간 09:00~18:00**

| 예약 시간대 | 검증 1 | 검증 2 | 결과 | 사유 |
|------------|--------|--------|------|------|
| 09:00~12:00 | ✅ | ✅ | ✅ 정상 | 완전히 포함됨 |
| 13:00~18:00 | ✅ | ✅ | ✅ 정상 | 완전히 포함됨 |
| 09:00~18:00 | ✅ | ✅ | ✅ 정상 | 정확히 일치 |
| 08:00~10:00 | ❌ | ✅ | ❌ 오류 | 시작 시간 위반 |
| 16:00~19:00 | ✅ | ❌ | ❌ 오류 | 종료 시간 위반 |
| 08:00~19:00 | ❌ | ❌ | ❌ 오류 | 양쪽 모두 위반 |

**오류 메시지:**
```
"예약 시간대는 영업 시간(09:00~18:00) 내에 있어야 합니다."
"시작 시간(08:00)이 영업 시작 시간(09:00)보다 이릅니다."
"종료 시간(19:00)이 영업 종료 시간(18:00)보다 늦습니다."
```

---

#### 4.2.2 시간대 중복 금지

**규칙 OH-02: 동일 요일 겹침 금지**

같은 요일에 등록된 예약 가능 시간대끼리는 겹치지 않아야 한다.

```
겹침 판정 기준:
  두 시간대 [A시작, A종료]와 [B시작, B종료]가 겹친다
  ↔ NOT (A종료 ≤ B시작 OR B종료 ≤ A시작)
```

**예시: 월요일 기존 시간대**
```
① 09:00~12:00
② 13:00~18:00
```

| 신규 시간대 | ①과 비교 | ②와 비교 | 결과 | 사유 |
|------------|----------|----------|------|------|
| 12:00~13:00 | 겹침 없음 | 겹침 없음 | ✅ 정상 | 브레이크타임 메움 |
| 07:00~09:00 | 겹침 없음 | 겹침 없음 | ✅ 정상 | 이전 시간 (단, 범위 검증 필요) |
| 18:00~20:00 | 겹침 없음 | 겹침 없음 | ✅ 정상 | 이후 시간 (단, 범위 검증 필요) |
| 10:00~11:00 | **겹침** | 겹침 없음 | ❌ 오류 | ①과 겹침 |
| 11:30~13:30 | **겹침** | **겹침** | ❌ 오류 | ①, ② 모두와 겹침 |
| 17:00~19:00 | 겹침 없음 | **겹침** | ❌ 오류 | ②와 겹침 |

**경계 조건:**

| 기존 | 신규 | 겹침 여부 | 사유 |
|------|------|----------|------|
| 09:00~12:00 | 12:00~13:00 | ❌ 겹침 없음 | 정각 경계는 허용 |
| 09:00~12:00 | 08:00~09:00 | ❌ 겹침 없음 | 정각 경계는 허용 |
| 09:00~12:00 | 11:59~13:00 | ✅ 겹침 | 1분이라도 겹치면 불허 |
| 09:00~12:00 | 08:00~09:01 | ✅ 겹침 | 1분이라도 겹치면 불허 |

**오류 메시지:**
```
"기존 예약 시간대(09:00~12:00)와 겹칩니다."
"해당 요일에 이미 10:00~11:00 시간대가 등록되어 있습니다."
```

---

**규칙 OH-03: 수정 시 자기 제외**

기존 시간대를 수정할 때는 자기 자신과의 겹침은 검사하지 않는다.

**예시:**

```
기존 시간대:
  ID=1: 09:00~12:00
  ID=2: 13:00~18:00

시나리오: ID=1을 09:00~11:30으로 수정
```

| 비교 대상 | 겹침 검사 여부 | 사유 |
|----------|---------------|------|
| ID=1 (자기 자신) | ❌ 제외 | 자기 자신은 당연히 겹침 |
| ID=2 | ✅ 검사 | 다른 시간대와는 검사 필요 |

---

#### 4.2.3 브레이크타임 표현

**규칙 OH-04: 브레이크타임 구현**

브레이크타임(점심시간 등)은 예약 가능 시간대를 분리하여 표현한다.

```
방식: 같은 요일에 여러 sequence 등록
```

**예시: 월요일 12:00~13:00 점심시간**

| sequence | 시작 | 종료 | 설명 |
|----------|------|------|------|
| 0 | 09:00 | 12:00 | 오전 예약 가능 |
| - | 12:00 | 13:00 | 브레이크타임 (등록 안 함) |
| 1 | 13:00 | 18:00 | 오후 예약 가능 |

**결과:**
- 고객은 09:00~12:00, 13:00~18:00 시간대에만 예약 가능
- 12:00~13:00은 자동으로 예약 불가 시간으로 처리됨

---

### 4.3 영업 시간 수정 시 제약

#### 4.3.1 축소 제약 사항

**규칙 BH-03: 하위 데이터 보호**

영업 시간을 축소할 경우, 기존 예약 가능 시간대가 새로운 범위를 벗어나면 수정할 수 없다.

**예시:**

```
현재 상태:
  BusinessHours (월): 09:00~18:00
  OperatingHours:
    - seq 0: 09:00~12:00
    - seq 1: 13:00~18:00

수정 시도: 10:00~17:00
```

**검증:**

| 기존 시간대 | 새 범위 | 검증 | 결과 | 사유 |
|------------|---------|------|------|------|
| 09:00~12:00 | 10:00~17:00 | 09:00 < 10:00 | ❌ | 시작 시간 위반 |
| 13:00~18:00 | 10:00~17:00 | 18:00 > 17:00 | ❌ | 종료 시간 위반 |

**결과:** 수정 불가

**오류 메시지:**
```
"영업 시간을 축소할 수 없습니다. 기존 예약 시간대(09:00~12:00)가 새로운 영업 시간(10:00~17:00) 밖에 있습니다."
"다음 예약 시간대를 먼저 수정하거나 삭제해주세요: 09:00~12:00, 13:00~18:00"
```

---

#### 4.3.2 기존 데이터 보호

**규칙 OH-05: 예약 존재 시 제약 (진행 중인 예약 보호)**

예약 가능 시간대를 축소하거나 삭제할 때, 진행 중인 예약이 있으면 변경할 수 없다.

**검증 조건:**

```
해당 OperatingHours의 예약 중:
  AND 예약 날짜 ≥ 오늘
  AND 예약 상태 IN (PENDING, CONFIRMED)
```

**검증 결과:**
- 조건 만족하는 예약 존재 → ❌ 변경 불가
- 조건 만족하는 예약 없음 → ✅ 변경 가능

**예시 1: 진행 중인 예약 존재 (변경 불가)**

```
현재 상태:
  OperatingHours: 월요일 14:00~18:00
  진행 중인 예약:
    - 2025-01-13(월) 16:00~18:00 (CONFIRMED)
    - 2025-01-20(월) 14:00~16:00 (PENDING)

변경 시도: 14:00~17:00로 축소
```

| 예약 | 예약 시간 | 새 범위 | 영향 여부 |
|------|----------|---------|----------|
| 2025-01-13 | 16:00~18:00 | 14:00~17:00 | ⚠️ 17:00~18:00 삭제됨 |
| 2025-01-20 | 14:00~16:00 | 14:00~17:00 | ✅ 영향 없음 |

**결과:** ❌ 변경 거부

**오류 메시지:**
```
"해당 시간대에 2건의 예약이 예정되어 있습니다.
(가장 빠른 예약: 2025-01-13 16:00)

다음 예약이 영향받습니다:
- 2025-01-13 16:00~18:00

먼저 고객과 협의 후 예약을 취소하거나 시간을 변경해주세요."
```

---

**예시 2: 과거 예약만 존재 (변경 가능)**

```
현재 상태:
  OperatingHours: 월요일 14:00~18:00
  과거 예약:
    - 2024-12-16(월) 16:00~18:00 (COMPLETED)
    - 2024-12-23(월) 14:00~16:00 (COMPLETED)

변경 시도: 14:00~17:00로 축소
```

**검증:**

| 예약 | 예약 날짜 | 진행 중 여부 |
|------|----------|-------------|
| 2024-12-16 | 과거 | ❌ (COMPLETED) |
| 2024-12-23 | 과거 | ❌ (COMPLETED) |

**결과:** ✅ 변경 허용

**과거 예약 처리:**
- 삭제되지 않음 (DB에 보존)
- 통계/매출 분석에 계속 활용
- 변경된 OperatingHours와 무관하게 유지

**정책 근거:**

1. **고객 약속 보호**: 확정된 예약의 일방적 변경은 신뢰 파괴
2. **시스템 안정성**: 예약 시간과 실제 가능 시간 불일치 방지
3. **과거 데이터 보존**: 매출 통계, 세금 신고 증빙 자료로 활용

---

**규칙 BH-04: 휴무일 전환 (유연한 정책)**

영업일을 휴무일로 전환할 때, 기존 예약은 유지하면서 신규 예약만 차단한다.

**동작 방식:**

```
영업일 → 휴무일 전환 시:
  1. BusinessHours.isClosed = true
  2. OperatingHours[].isClosed = true
  
결과:
  - 신규 예약 차단 ✅
  - 기존 예약 유지 ✅
```

**예시:**

```
현재 상태:
  월요일: 영업 (09:00~18:00)
  진행 중인 예약:
    - 2025-01-13(월) 10:00 (CONFIRMED)
    - 2025-01-20(월) 14:00 (PENDING)

월요일 휴무 전환 실행
```

| 항목 | 변경 전 | 변경 후 | 설명 |
|------|---------|---------|------|
| BusinessHours.isClosed | false | true | 요일 전체 휴무 설정 |
| OperatingHours[].isClosed | false | true | 모든 시간대 예약 차단 |
| 기존 예약 (2025-01-13) | 유지 | 유지 | 고객 약속 보호 |
| 기존 예약 (2025-01-20) | 유지 | 유지 | 고객 약속 보호 |
| 신규 예약 시도 | 가능 | **차단** | 휴무일로 표시 |

**고객 관점:**

```
휴무 전환 전:
  월요일
  ├─ 2025-01-13 10:00 예약됨 ✅
  ├─ 2025-01-20 14:00 예약됨 ✅
  └─ 2025-01-27 예약 가능

휴무 전환 후:
  월요일
  ├─ 2025-01-13 10:00 예약됨 ✅ (유지)
  ├─ 2025-01-20 14:00 예약됨 ✅ (유지)
  └─ 2025-01-27 예약 불가 (휴무일 표시)
```

**검증 조건:**

휴무일 전환 시 다음을 검증하지 **않는다**:

| 검증 항목 | 검증 여부 | 사유 |
|----------|----------|------|
| 예약 가능 시간대 존재 여부 | ❌ 검증 안 함 | 운영 유연성 |
| 진행 중인 예약 존재 여부 | ❌ 검증 안 함 | 고객 약속은 유지 |

**정책 근거:**

1. **비즈니스 유연성**: 갑작스러운 휴무 상황 대응 (업주 질병, 긴급 보수 등)
2. **고객 신뢰 유지**: 받은 약속은 지킨다 (기존 예약 서비스 제공 의무)
3. **실무 현실 반영**: 즉시 휴무 설정 후 기존 예약 개별 안내

---

## 5. 검증 시나리오

### 5.1 정상 케이스

#### 시나리오 1: 브레이크타임 등록

**상황:**
- 월요일 영업 시간: 09:00~18:00
- 기존 시간대: 없음
- 목표: 12:00~13:00 점심시간 설정

**진행:**

| 단계 | 작업 | 입력 값 | 결과 |
|------|------|---------|------|
| 1 | 오전 시간대 등록 | 09:00~12:00 | ✅ 성공 |
| 2 | 오후 시간대 등록 | 13:00~18:00 | ✅ 성공 |

**최종 상태:**
```
월요일
├─ seq 0: 09:00~12:00 ✅
├─ (브레이크타임: 12:00~13:00)
└─ seq 1: 13:00~18:00 ✅
```

---

#### 시나리오 2: 영업 시간 확장

**상황:**
- 월요일 영업 시간: 09:00~18:00 → 08:00~20:00 확장
- 기존 시간대: 09:00~12:00, 13:00~18:00

**검증:**

| 기존 시간대 | 새 영업 시간 | 검증 | 결과 |
|------------|-------------|------|------|
| 09:00~12:00 | 08:00~20:00 | 포함됨 | ✅ 정상 |
| 13:00~18:00 | 08:00~20:00 | 포함됨 | ✅ 정상 |

**결과:** 확장 성공

---

### 5.2 오류 케이스

#### 시나리오 3: 영업 시간 범위 위반

**상황:**
- 월요일 영업 시간: 09:00~18:00
- 시도: 08:00~10:00 시간대 등록

**검증:**

| 항목 | 값 | 조건 | 결과 |
|------|-----|------|------|
| 시작 시간 | 08:00 | ≥ 09:00 | ❌ 위반 |
| 종료 시간 | 10:00 | ≤ 18:00 | ✅ 정상 |

**오류 메시지:**
```
"시작 시간(08:00)이 영업 시작 시간(09:00)보다 이릅니다."
```

---

#### 시나리오 4: 시간대 겹침

**상황:**
- 월요일 영업 시간: 09:00~18:00
- 기존 시간대: 09:00~12:00
- 시도: 10:00~13:00 등록

**겹침 분석:**
```
기존: 09:00 ────────── 12:00
신규:       10:00 ────────── 13:00
겹침:       10:00 ──── 12:00  ← 2시간 겹침
```

**검증:**

| 조건 | 결과 |
|------|------|
| NOT (12:00 ≤ 10:00 OR 13:00 ≤ 09:00) | True → 겹침 발생 |

**오류 메시지:**
```
"기존 예약 시간대(09:00~12:00)와 겹칩니다."
```

---

#### 시나리오 5: 영업 시간 축소 실패

**상황:**
- 월요일 영업 시간: 09:00~18:00
- 기존 시간대: 09:00~12:00, 13:00~18:00
- 시도: 10:00~17:00로 축소

**검증:**

| 기존 시간대 | 검증 | 결과 |
|------------|------|------|
| 09:00~12:00 | 09:00 < 10:00 | ❌ 시작 시간 밖 |
| 13:00~18:00 | 18:00 > 17:00 | ❌ 종료 시간 밖 |

**오류 메시지:**
```
"영업 시간을 축소할 수 없습니다. 기존 예약 시간대(09:00~12:00, 13:00~18:00)가 새로운 영업 시간(10:00~17:00) 밖에 있습니다."
```

---

### 5.3 경계 조건

#### 시나리오 6: 정각 경계

**상황:**
- 월요일 영업 시간: 09:00~18:00
- 기존 시간대: 09:00~12:00
- 시도: 12:00~13:00 등록

**겹침 검증:**
```
기존: 09:00 ────────── 12:00
신규:                  12:00 ─── 13:00
경계:                  12:00 (정각)
```

| 조건 | 계산 | 결과 |
|------|------|------|
| 기존 종료 ≤ 신규 시작 | 12:00 ≤ 12:00 | True |
| 신규 종료 ≤ 기존 시작 | 13:00 ≤ 09:00 | False |
| 최종 (둘 중 하나 True) | - | ✅ 겹치지 않음 |

**결과:** 등록 성공

---

#### 시나리오 7: 1분 차이

**상황:**
- 기존 시간대: 09:00~12:00
- 시도: 11:59~13:00 등록

**겹침 검증:**
```
기존: 09:00 ────────── 12:00
신규:             11:59 ────── 13:00
겹침:             11:59 ─ 12:00 (1분)
```

| 조건 | 계산 | 결과 |
|------|------|------|
| 기존 종료 ≤ 신규 시작 | 12:00 ≤ 11:59 | False |
| 신규 종료 ≤ 기존 시작 | 13:00 ≤ 09:00 | False |
| 최종 (둘 다 False) | - | ❌ 겹침 발생 |

**오류 메시지:**
```
"기존 예약 시간대(09:00~12:00)와 겹칩니다."
```

---

#### 시나리오 8: 완전 일치

**상황:**
- 월요일 영업 시간: 09:00~18:00
- 기존 시간대: 없음
- 시도: 09:00~18:00 등록

**검증:**

| 항목 | 값 | 조건 | 결과 |
|------|-----|------|------|
| 시작 시간 | 09:00 | ≥ 09:00 | ✅ 정상 |
| 종료 시간 | 18:00 | ≤ 18:00 | ✅ 정상 |
| 겹침 | - | 기존 없음 | ✅ 정상 |

**결과:** 등록 성공 (영업 시간 전체를 예약 가능 시간대로 설정)

