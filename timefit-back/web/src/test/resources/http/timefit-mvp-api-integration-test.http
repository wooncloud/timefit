### ================================================================
### Timefit ì „ì²´ API í…ŒìŠ¤íŠ¸ - Integration Test
### ================================================================
###
### í…ŒìŠ¤íŠ¸ ë²”ìœ„:
### âœ… 01. ì¸ì¦/ì¸ê°€ (OAuth ì œì™¸)
### âœ… 02. ì—…ì²´ ê´€ë¦¬ (êµ¬ì„±ì› ì´ˆëŒ€ ì œì™¸)
### âœ… 03. ì˜ì—…ì‹œê°„ ê´€ë¦¬
### âœ… 04. ë©”ë‰´ ì¹´í…Œê³ ë¦¬
### âœ… 05. ë©”ë‰´ ê´€ë¦¬
### âœ… 06. ì˜ˆì•½ ìŠ¬ë¡¯
### âœ… 07. ì˜ˆì•½ ê´€ë¦¬ (ê³ ê°ìš©/ì—…ì²´ìš©)
### âŒ 08. ì´ˆëŒ€ ê´€ë¦¬ (ì œì™¸)
### âŒ user-controller (ì œì™¸)
###
### ğŸ”§ ìˆ˜ì • ì‚¬í•­:
### - ì˜ì—…ì‹œê°„ í† ê¸€/ë¦¬ì…‹ì„ ìŠ¬ë¡¯ ì¡°íšŒ ì´í›„ë¡œ ì´ë™
### - ìŠ¬ë¡¯ì´ ìƒì„±ëœ í›„ ì˜ì—…ì‹œê°„ ë³€ê²½ í…ŒìŠ¤íŠ¸
###
### ================================================================

@baseUrl = http://localhost:8080

### ================================================================
### [Setup 1] Owner íšŒì›ê°€ì… + ë¡œê·¸ì¸
### ================================================================

# @name OwneríšŒì›ê°€ì…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "owner.test@timefit.com",
  "password": "owner1234!",
  "name": "ê¹€ì‚¬ì¥",
  "phoneNumber": "010-1111-1111",
  "role": "BUSINESS"
}

> {%
    console.log("\n========================================");
    console.log("[Setup 1-1] Owner íšŒì›ê°€ì…");
    console.log("========================================");
    if (response.status === 200 || response.status === 201) {
        console.log("âœ… Owner íšŒì›ê°€ì… ì„±ê³µ");
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name Ownerë¡œê·¸ì¸
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "owner.test@timefit.com",
  "password": "owner1234!"
}

> {%
    console.log("\n========================================");
    console.log("[Setup 1-2] Owner ë¡œê·¸ì¸");
    console.log("========================================");
    if (response.status === 200 && response.body.data.accessToken) {
        client.global.set("ownerToken", response.body.data.accessToken);
        client.global.set("ownerRefreshToken", response.body.data.refreshToken);
        console.log("âœ… Owner ë¡œê·¸ì¸ ì„±ê³µ - Token ì €ì¥");
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================
### [Setup 2] Customer íšŒì›ê°€ì… + ë¡œê·¸ì¸
### ================================================================

# @name CustomeríšŒì›ê°€ì…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "customer.test@timefit.com",
  "password": "customer1234!",
  "name": "ì´ê³ ê°",
  "phoneNumber": "010-2222-2222",
  "role": "CUSTOMER"
}

> {%
    console.log("\n========================================");
    console.log("[Setup 2-1] Customer íšŒì›ê°€ì…");
    console.log("========================================");
    if (response.status === 200 || response.status === 201) {
        console.log("âœ… Customer íšŒì›ê°€ì… ì„±ê³µ");
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name Customerë¡œê·¸ì¸
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "customer.test@timefit.com",
  "password": "customer1234!"
}

> {%
    console.log("\n========================================");
    console.log("[Setup 2-2] Customer ë¡œê·¸ì¸");
    console.log("========================================");
    if (response.status === 200 && response.body.data.accessToken) {
        client.global.set("customerToken", response.body.data.accessToken);
        client.global.set("customerRefreshToken", response.body.data.refreshToken);
        console.log("âœ… Customer ë¡œê·¸ì¸ ì„±ê³µ - Token ì €ì¥");
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================
### [Test 1] ì¸ì¦/ì¸ê°€ API
### ================================================================

# @name Healthì²´í¬
GET {{baseUrl}}/api/auth/health

> {%
    console.log("\n[01-1] Health Check");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name Tokenê°±ì‹ _Owner
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{ownerRefreshToken}}"
}

> {%
    console.log("\n[01-2] Owner Token ê°±ì‹ ");
    if (response.status === 200 && response.body.data.accessToken) {
        client.global.set("ownerToken", response.body.data.accessToken);
        client.global.set("ownerRefreshToken", response.body.data.refreshToken);
        console.log("âœ… ì„±ê³µ - ìƒˆ Token ì €ì¥");
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name Tokenê°±ì‹ _Customer
POST {{baseUrl}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{customerRefreshToken}}"
}

> {%
    console.log("\n[01-3] Customer Token ê°±ì‹ ");
    if (response.status === 200 && response.body.data.accessToken) {
        client.global.set("customerToken", response.body.data.accessToken);
        client.global.set("customerRefreshToken", response.body.data.refreshToken);
        console.log("âœ… ì„±ê³µ - ìƒˆ Token ì €ì¥");
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================
### [Test 2] ì—…ì²´ ê´€ë¦¬ API
### ================================================================

# @name ì—…ì²´ìƒì„±
POST {{baseUrl}}/api/business
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessName": "Timefit í…ŒìŠ¤íŠ¸ í—¤ì–´ìƒµ",
  "businessTypes": ["BD008"],
  "businessNumber": "123-45-67890",
  "ownerName": "ê¹€ì‚¬ì¥",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 1",
  "contactPhone": "02-1111-1111",
  "description": "ì¢…í•© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í—¤ì–´ìƒµì…ë‹ˆë‹¤."
}

> {%
    console.log("\n[02-1] ì—…ì²´ ìƒì„±");
    if (response.status === 200 || response.status === 201) {
        client.global.set("businessId", response.body.data.businessId);
        console.log("âœ… ì„±ê³µ - Business ID:", response.body.data.businessId);
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name ì—…ì²´ê²€ìƒ‰
GET {{baseUrl}}/api/business/search?keyword=í…ŒìŠ¤íŠ¸&page=0&size=10

> {%
    console.log("\n[02-2] ì—…ì²´ ê²€ìƒ‰ (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì—…ì²´ê³µê°œìƒì„¸ì¡°íšŒ
GET {{baseUrl}}/api/business/{{businessId}}

> {%
    console.log("\n[02-3] ì—…ì²´ ê³µê°œ ìƒì„¸ ì¡°íšŒ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì—…ì²´ìƒì„¸ì¡°íšŒ_ì‚¬ì—…ììš©
GET {{baseUrl}}/api/business/{{businessId}}/profile
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[02-4] ì—…ì²´ ìƒì„¸ ì¡°íšŒ (ì‚¬ì—…ììš©)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë‚´ì—…ì²´ëª©ë¡ì¡°íšŒ
GET {{baseUrl}}/api/business/my-businesses
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[02-5] ë‚´ ì—…ì²´ ëª©ë¡ ì¡°íšŒ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì—…ì²´ì •ë³´ìˆ˜ì •
PUT {{baseUrl}}/api/business/{{businessId}}
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessName": "Timefit í…ŒìŠ¤íŠ¸ í—¤ì–´ìƒµ (ìˆ˜ì •ë¨)",
  "businessTypes": ["BD008"],
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 2",
  "contactPhone": "02-2222-2222",
  "description": "ì—…ì²´ ì •ë³´ ìˆ˜ì • í…ŒìŠ¤íŠ¸"
}

> {%
    console.log("\n[02-6] ì—…ì²´ ì •ë³´ ìˆ˜ì •");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 3-1] ì˜ì—…ì‹œê°„ ê´€ë¦¬ API - ì¡°íšŒ ë° ì„¤ì •
### ================================================================

# @name ì˜ì—…ì‹œê°„ì¡°íšŒ
GET {{baseUrl}}/api/business/{{businessId}}/operating-hours

> {%
    console.log("\n[03-1] ì˜ì—…ì‹œê°„ ì¡°íšŒ (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ì—…ì‹œê°„ì„¤ì •
PUT {{baseUrl}}/api/business/{{businessId}}/operating-hours
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "schedules": [
    {
      "dayOfWeek": 1,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 2,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 3,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 4,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 5,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 6,
      "isClosed": true,
      "bookingTimeRanges": []
    },
    {
      "dayOfWeek": 0,
      "isClosed": true,
      "bookingTimeRanges": []
    }
  ]
}

> {%
    console.log("\n[03-2] ì˜ì—…ì‹œê°„ ì„¤ì •");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 4] ë©”ë‰´ ì¹´í…Œê³ ë¦¬ API
### ================================================================

# @name ì¹´í…Œê³ ë¦¬ìƒì„±
POST {{baseUrl}}/api/business/{{businessId}}/category
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessType": "BD008",
  "categoryName": "Hair"
}

> {%
    console.log("\n[04-1] ì¹´í…Œê³ ë¦¬ ìƒì„±");
    if (response.status === 200 || response.status === 201) {
        client.global.set("categoryId", response.body.data.categoryId);
        console.log("âœ… ì„±ê³µ - Category ID:", response.body.data.categoryId);
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name ì¹´í…Œê³ ë¦¬ëª©ë¡ì¡°íšŒ
GET {{baseUrl}}/api/business/{{businessId}}/categories
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[04-2] ì¹´í…Œê³ ë¦¬ ëª©ë¡ ì¡°íšŒ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì¹´í…Œê³ ë¦¬ìƒì„¸ì¡°íšŒ
GET {{baseUrl}}/api/business/{{businessId}}/category/{{categoryId}}
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[04-3] ì¹´í…Œê³ ë¦¬ ìƒì„¸ ì¡°íšŒ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì¹´í…Œê³ ë¦¬ìˆ˜ì •
PATCH {{baseUrl}}/api/business/{{businessId}}/category/{{categoryId}}
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "categoryName": "Hair Style",
  "categoryNotice": "ì¹´í…Œê³ ë¦¬ ìˆ˜ì • í…ŒìŠ¤íŠ¸"
}

> {%
    console.log("\n[04-4] ì¹´í…Œê³ ë¦¬ ìˆ˜ì •");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 5] ë©”ë‰´ ê´€ë¦¬ API
### ================================================================

# @name ë©”ë‰´ìƒì„±_í—¤ì–´ì»·
POST {{baseUrl}}/api/business/{{businessId}}/menu
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessType": "BD008",
  "categoryName": "Hair Style",
  "serviceName": "í—¤ì–´ì»·",
  "description": "ê¸°ë³¸ ì»¤íŠ¸ ì„œë¹„ìŠ¤",
  "price": 30000,
  "durationMinutes": 60,
  "orderType": "RESERVATION_BASED",
  "autoGenerateSlots": true,
  "slotSettings": {
    "startDate": "2026-01-20",
    "endDate": "2026-01-31",
    "slotIntervalMinutes": 60,
    "specificTimeRanges": [
      {"startTime": "09:00", "endTime": "18:00"}
    ]
  }
}

> {%
    console.log("\n[05-1] ë©”ë‰´ ìƒì„± (í—¤ì–´ì»·)");
    if (response.status === 200 || response.status === 201) {
        client.global.set("menuId1", response.body.data.menuId);
        console.log("âœ… ì„±ê³µ - Menu ID:", response.body.data.menuId);
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name ë©”ë‰´ìƒì„±_íŒŒë§ˆ
POST {{baseUrl}}/api/business/{{businessId}}/menu
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessType": "BD008",
  "categoryName": "Hair Style",
  "serviceName": "íŒŒë§ˆ",
  "description": "íŒŒë§ˆ ì„œë¹„ìŠ¤",
  "price": 80000,
  "durationMinutes": 120,
  "orderType": "RESERVATION_BASED",
  "autoGenerateSlots": true,
  "slotSettings": {
    "startDate": "2026-01-20",
    "endDate": "2026-01-31",
    "slotIntervalMinutes": 60,
    "specificTimeRanges": [
      {"startTime": "09:00", "endTime": "18:00"}
    ]
  }
}

> {%
    console.log("\n[05-2] ë©”ë‰´ ìƒì„± (íŒŒë§ˆ)");
    if (response.status === 200 || response.status === 201) {
        client.global.set("menuId2", response.body.data.menuId);
        console.log("âœ… ì„±ê³µ - Menu ID:", response.body.data.menuId);
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name ë©”ë‰´ëª©ë¡ì¡°íšŒ_ê³µê°œ
GET {{baseUrl}}/api/business/{{businessId}}/menu

> {%
    console.log("\n[05-3] ë©”ë‰´ ëª©ë¡ ì¡°íšŒ (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë©”ë‰´ìƒì„¸ì¡°íšŒ_ê³µê°œ
GET {{baseUrl}}/api/business/{{businessId}}/menu/{{menuId1}}

> {%
    console.log("\n[05-4] ë©”ë‰´ ìƒì„¸ ì¡°íšŒ (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë©”ë‰´ìˆ˜ì •
PATCH {{baseUrl}}/api/business/{{businessId}}/menu/{{menuId1}}
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "serviceName": "í—¤ì–´ì»· í”„ë¦¬ë¯¸ì—„",
  "description": "í”„ë¦¬ë¯¸ì—„ ì»¤íŠ¸ ì„œë¹„ìŠ¤",
  "price": 35000,
  "durationMinutes": 60
}

> {%
    console.log("\n[05-5] ë©”ë‰´ ìˆ˜ì •");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë©”ë‰´í™œì„±ë¹„í™œì„±í† ê¸€
PATCH {{baseUrl}}/api/business/{{businessId}}/menu/{{menuId1}}/toggle
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[05-6] ë©”ë‰´ í™œì„±/ë¹„í™œì„± í† ê¸€");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 6] ì˜ˆì•½ ìŠ¬ë¡¯ API
### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ì¡°íšŒ_íŠ¹ì •ë‚ ì§œ_ê³µê°œ
GET {{baseUrl}}/api/business/{{businessId}}/booking-slot?date=2026-01-20

> {%
    console.log("\n[06-1] ì˜ˆì•½ ìŠ¬ë¡¯ ì¡°íšŒ - íŠ¹ì • ë‚ ì§œ (ê³µê°œ)");
    if (response.status === 200) {
        const slots = response.body.data.slots;
        if (slots && slots.length > 0) {
            client.global.set("slotId1", slots[0].slotId);
            console.log("âœ… ì„±ê³µ - Slot ID ì €ì¥:", slots[0].slotId);
        } else {
            console.log("âœ… ì„±ê³µ - ìŠ¬ë¡¯ ì—†ìŒ");
        }
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ì¡°íšŒ_í–¥í›„í™œì„±_ê³µê°œ
GET {{baseUrl}}/api/business/{{businessId}}/booking-slot/upcoming?days=7

> {%
    console.log("\n[06-2] ì˜ˆì•½ ìŠ¬ë¡¯ ì¡°íšŒ - í–¥í›„ í™œì„± (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ì¡°íšŒ_ê¸°ê°„ë³„_ê³µê°œ
GET {{baseUrl}}/api/business/{{businessId}}/booking-slot/range?startDate=2026-01-20&endDate=2026-01-31

> {%
    console.log("\n[06-3] ì˜ˆì•½ ìŠ¬ë¡¯ ì¡°íšŒ - ê¸°ê°„ë³„ (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ì¡°íšŒ_ë©”ë‰´ë³„_ê³µê°œ
GET {{baseUrl}}/api/business/{{businessId}}/booking-slot/menu/{{menuId1}}?startDate=2026-01-20&endDate=2026-01-31

> {%
    console.log("\n[06-4] ì˜ˆì•½ ìŠ¬ë¡¯ ì¡°íšŒ - ë©”ë‰´ë³„ (ê³µê°œ)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ì¼ê´„ìƒì„±
POST {{baseUrl}}/api/business/{{businessId}}/booking-slot
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "menuId": "{{menuId1}}",
  "startDate": "2026-02-01",
  "endDate": "2026-02-07",
  "slotIntervalMinutes": 60,
  "specificTimeRanges": [
    {"startTime": "09:00", "endTime": "12:00"},
    {"startTime": "13:00", "endTime": "18:00"}
  ]
}

> {%
    console.log("\n[06-5] ì˜ˆì•½ ìŠ¬ë¡¯ ì¼ê´„ ìƒì„±");
    console.log(response.status === 200 || response.status === 201 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ë¹„í™œì„±í™”
PATCH {{baseUrl}}/api/business/{{businessId}}/booking-slot/{{slotId1}}/deactivate
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[06-6] ì˜ˆì•½ ìŠ¬ë¡¯ ë¹„í™œì„±í™”");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯í™œì„±í™”
PATCH {{baseUrl}}/api/business/{{businessId}}/booking-slot/{{slotId1}}/activate
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[06-7] ì˜ˆì•½ ìŠ¬ë¡¯ í™œì„±í™”");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 3-2] ì˜ì—…ì‹œê°„ ê´€ë¦¬ API - í† ê¸€ ë° ë¦¬ì…‹ (ìŠ¬ë¡¯ ìƒì„± í›„)
### ================================================================

# @name ì˜ì—…ì‹œê°„í† ê¸€
PATCH {{baseUrl}}/api/business/{{businessId}}/operating-hours/1/toggle
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[03-3] ì˜ì—…ì‹œê°„ í† ê¸€ (ì›”ìš”ì¼)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ì—…ì‹œê°„ë¦¬ì…‹
PATCH {{baseUrl}}/api/business/{{businessId}}/operating-hours/reset
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[03-4] ì˜ì—…ì‹œê°„ ë¦¬ì…‹");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 7] ì˜ˆì•½ ê´€ë¦¬ API - ê³ ê°ìš©
### ================================================================

# @name ì˜ˆì•½ìƒì„±_ê³ ê°
POST {{baseUrl}}/api/reservation
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{businessId}}",
  "menuId": "{{menuId1}}",
  "bookingSlotId": "{{slotId1}}",
  "durationMinutes": 60,
  "totalPrice": 35000,
  "customerName": "ì´ê³ ê°",
  "customerPhone": "01022222222",
  "notes": "ì˜ˆì•½ ìƒì„± í…ŒìŠ¤íŠ¸"
}

> {%
    console.log("\n[07-1] ì˜ˆì•½ ìƒì„± (ê³ ê°)");
    if (response.status === 200 || response.status === 201) {
        client.global.set("reservationId", response.body.data.reservationId);
        console.log("âœ… ì„±ê³µ - Reservation ID:", response.body.data.reservationId);
    } else {
        console.error("âŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================

# @name ë‚´ì˜ˆì•½ëª©ë¡ì¡°íšŒ_ê³ ê°
GET {{baseUrl}}/api/reservations
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[07-2] ë‚´ ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ (ê³ ê°)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìƒì„¸ì¡°íšŒ_ê³ ê°
GET {{baseUrl}}/api/reservation/{{reservationId}}
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[07-3] ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ (ê³ ê°)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìˆ˜ì •_ê³ ê°
PUT {{baseUrl}}/api/reservation/{{reservationId}}
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "notes": "ì˜ˆì•½ ìˆ˜ì • í…ŒìŠ¤íŠ¸"
}

> {%
    console.log("\n[07-4] ì˜ˆì•½ ìˆ˜ì • (ê³ ê°)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 8] ì˜ˆì•½ ê´€ë¦¬ API - ì—…ì²´ìš©
### ================================================================

# @name ì—…ì²´ì˜ˆì•½ëª©ë¡ì¡°íšŒ
GET {{baseUrl}}/api/business/{{businessId}}/reservations?status=PENDING&startDate=2026-01-01&endDate=2026-12-31&page=0&size=20
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[08-1] ì—…ì²´ ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìƒì„¸ì¡°íšŒ_ì—…ì²´
GET {{baseUrl}}/api/business/{{businessId}}/reservation/{{reservationId}}
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[08-2] ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ (ì—…ì²´)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¹ì¸_ì—…ì²´
POST {{baseUrl}}/api/business/{{businessId}}/reservation/{{reservationId}}/approve
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[08-3] ì˜ˆì•½ ìŠ¹ì¸");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ì™„ë£Œì²˜ë¦¬_ì—…ì²´
POST {{baseUrl}}/api/business/{{businessId}}/reservation/{{reservationId}}/complete
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "notes": "ì„œë¹„ìŠ¤ ì œê³µ ì™„ë£Œ"
}

> {%
    console.log("\n[08-4] ì˜ˆì•½ ì™„ë£Œ ì²˜ë¦¬");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ê±°ì ˆ_ì—…ì²´
POST {{baseUrl}}/api/business/{{businessId}}/reservation/{{reservationId}}/reject
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "reason": "ì—…ì²´ ì‚¬ì •ìœ¼ë¡œ ì˜ˆì•½ ë¶ˆê°€"
}

> {%
    console.log("\n[08-5] ì˜ˆì•½ ê±°ì ˆ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë…¸ì‡¼ì²˜ë¦¬_ì—…ì²´
POST {{baseUrl}}/api/business/{{businessId}}/reservation/{{reservationId}}/no-show
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[08-6] ë…¸ì‡¼ ì²˜ë¦¬");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================
### [Test 9] Cleanup & Delete Tests
### ================================================================

# @name ì˜ˆì•½ì·¨ì†Œ_ê³ ê°
DELETE {{baseUrl}}/api/reservation/{{reservationId}}
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[09-1] ì˜ˆì•½ ì·¨ì†Œ (ê³ ê°)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì˜ˆì•½ìŠ¬ë¡¯ì‚­ì œ
DELETE {{baseUrl}}/api/business/{{businessId}}/booking-slot/{{slotId1}}
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[09-2] ì˜ˆì•½ ìŠ¬ë¡¯ ì‚­ì œ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ê³¼ê±°ìŠ¬ë¡¯ì¼ê´„ì‚­ì œ
DELETE {{baseUrl}}/api/business/{{businessId}}/booking-slot/past
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[09-3] ê³¼ê±° ìŠ¬ë¡¯ ì¼ê´„ ì‚­ì œ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë©”ë‰´ì‚­ì œ
DELETE {{baseUrl}}/api/business/{{businessId}}/menu/{{menuId1}}
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[09-4] ë©”ë‰´ ì‚­ì œ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì¹´í…Œê³ ë¦¬ì‚­ì œ
DELETE {{baseUrl}}/api/business/{{businessId}}/category/{{categoryId}}
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[09-5] ì¹´í…Œê³ ë¦¬ ì‚­ì œ");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ì—…ì²´ì‚­ì œ
DELETE {{baseUrl}}/api/business/{{businessId}}
Authorization: Bearer {{ownerToken}}

> {%
    console.log("\n[09-6] ì—…ì²´ ì‚­ì œ (ë¹„í™œì„±í™”)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë¡œê·¸ì•„ì›ƒ_Owner
POST {{baseUrl}}/api/auth/logout
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "currentToken": "{{ownerToken}}"
}

> {%
    console.log("\n[09-7] ë¡œê·¸ì•„ì›ƒ (Owner)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");
%}

### ================================================================

# @name ë¡œê·¸ì•„ì›ƒ_Customer
POST {{baseUrl}}/api/auth/logout
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "currentToken": "{{customerToken}}"
}

> {%
    console.log("\n[09-8] ë¡œê·¸ì•„ì›ƒ (Customer)");
    console.log(response.status === 200 ? "âœ… ì„±ê³µ" : "âŒ ì‹¤íŒ¨");

    console.log("\n========================================");
    console.log("ğŸ‰ ì „ì²´ API í…ŒìŠ¤íŠ¸ ì™„ë£Œ!");
    console.log("========================================");
%}
