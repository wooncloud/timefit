### ================================================================
### Timefit ì´ˆëŒ€ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ (Happy Path)
### ðŸ“ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
###    1. ì‚¬ìž¥ ê³„ì •(owner@timefit.com) íšŒì›ê°€ìž…
###    2. ì‚¬ìž¥ì´ ì—…ì²´ ìƒì„±
###    3. ì†ë‹˜ ê³„ì •(sehan5284a@gmail.com) íšŒì›ê°€ìž…
###    4. ì‚¬ìž¥ì´ ì†ë‹˜ì—ê²Œ ì´ˆëŒ€ ë°œì†¡ âš ï¸ ì´ë©”ì¼ 1íšŒ ë°œì†¡
###    5. ì‚¬ìž¥ì´ ì´ˆëŒ€ ëª©ë¡ ì¡°íšŒ
###    6. ì†ë‹˜ì´ ì´ˆëŒ€ ìˆ˜ë½
###    7. ì‚¬ìž¥ì´ êµ¬ì„±ì› ëª©ë¡ í™•ì¸ (2ëª…)
### âš ï¸ ì£¼ì˜ì‚¬í•­:
###    - ì´ë©”ì¼ ë°œì†¡: 1íšŒë§Œ (Step 4)
###    - ì´ˆëŒ€ ìˆ˜ë½: 1íšŒë§Œ ê°€ëŠ¥ (ìž¬í…ŒìŠ¤íŠ¸ ì‹œ Step 4ë¶€í„° ë‹¤ì‹œ ì‹¤í–‰)
###    - í† í° ìœ íš¨ê¸°ê°„: 7ì¼
### ================================================================

@baseUrl = http://localhost:8080

### ================================================================
### 1. ì‚¬ìž¥ ê³„ì • íšŒì›ê°€ìž… (ì´ˆëŒ€í•˜ëŠ” ì‚¬ëžŒ)
### ================================================================

# @name ì´ˆëŒ€ìžíšŒì›ê°€ìž…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "owner@timefit.com",
  "password": "password123",
  "name": "ê¹€ì‚¬ìž¥",
  "phoneNumber": "010-1234-5678"
}

> {%
    client.global.set("ownerToken", response.body.data.accessToken);
    console.log("âœ… [1/7] ì‚¬ìž¥ íšŒì›ê°€ìž… ì„±ê³µ:", response.body.data.name);
%}

###

### ================================================================
### 2. ì‚¬ìž¥ì´ ì—…ì²´ ìƒì„±
### ================================================================

# @name ì—…ì²´ìƒì„±
POST {{baseUrl}}/api/business
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessName": "íƒ€ìž„í• í—¤ì–´ìƒµ",
  "businessTypes": ["BD008"],
  "businessNumber": "123-45-67890",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ëž€ë¡œ 123",
  "contactPhone": "02-1234-5678"
}

> {%
    client.global.set("businessId", response.body.data.businessId);
    console.log("âœ… [2/7] ì—…ì²´ ìƒì„± ì„±ê³µ:", response.body.data.businessName);
%}

###

### ================================================================
### 3. ì†ë‹˜ ê³„ì • íšŒì›ê°€ìž… (ì´ˆëŒ€ë°›ì„ ì‚¬ëžŒ)
### ================================================================

# @name í”¼ì´ˆëŒ€ìžíšŒì›ê°€ìž…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "sehan5284a@gmail.com",
  "password": "password123",
  "name": "ì´ì§ì›",
  "phoneNumber": "010-9876-5432"
}

> {%
    client.global.set("memberToken", response.body.data.accessToken);
    console.log("âœ… [3/7] ì†ë‹˜ íšŒì›ê°€ìž… ì„±ê³µ:", response.body.data.name);
%}

###

### ================================================================
### 4. ì‚¬ìž¥ì´ ì†ë‹˜ì—ê²Œ ì´ˆëŒ€ ë°œì†¡ âš ï¸ ì´ë©”ì¼ ë°œì†¡ 1íšŒ
### ================================================================

# @name ì´ˆëŒ€ë°œì†¡
POST {{baseUrl}}/api/business/{{businessId}}/member
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "email": "sehan5284a@gmail.com"
}

> {%
    console.log("âœ… [4/7] ì´ˆëŒ€ ë°œì†¡ ì„±ê³µ");
    console.log("    - ì´ˆëŒ€ë°›ëŠ” ì‚¬ëžŒ:", response.body.data.email);
    console.log("    - ì´ˆëŒ€í•œ ì‚¬ëžŒ:", response.body.data.invitedByName);
    console.log("âš ï¸ ì´ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤ (Gmail í™•ì¸: sehan5284a@gmail.com)");
%}

###

### ================================================================
### 5. ì‚¬ìž¥ì´ ì´ˆëŒ€ ëª©ë¡ ì¡°íšŒ
### ================================================================

# @name ì´ˆëŒ€ëª©ë¡ì¡°íšŒ
GET {{baseUrl}}/api/business/{{businessId}}/invitations
Authorization: Bearer {{ownerToken}}

> {%
    const invitation = response.body.data.invitations[0];
    client.global.set("invitationToken", invitation.token);
    client.global.set("invitationId", invitation.invitationId);
    console.log("âœ… [5/7] ì´ˆëŒ€ ëª©ë¡ ì¡°íšŒ ì„±ê³µ");
    console.log("    - ì´ˆëŒ€ ID:", invitation.invitationId);
    console.log("    - ì´ˆëŒ€ ìƒíƒœ:", invitation.status);
    console.log("    - ë§Œë£Œ ì‹œê°„:", invitation.expiresAt);
    console.log("\nðŸ“§ ì´ë©”ì¼ì—ì„œ ë°›ì€ í† í°:");
    console.log("    http://localhost:3000/invite/" + invitation.token);
    console.log("\nðŸ”‘ ì´ˆëŒ€ í† í° (ì²« 50ìž):", invitation.token.substring(0, 50) + "...");
%}

###


### ================================================================
### 6. ì†ë‹˜ì´ ì´ˆëŒ€ ìˆ˜ë½
###
### ðŸ” í…ŒìŠ¤íŠ¸ ë°©ë²•:
### Backend ë§Œìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ë°©ë²•ì€ 'ìˆ˜ë™' ë°–ì— ì—†ìŠµë‹ˆë‹¤.
### ìš°ì„  ì¸ì¦ ë°›ì€ ë©”ì¼ì—ì„œ í•´ë‹¹ ì´ˆëŒ€ì— ëŒ€í•œ ì¸ì¦ ê°’ì„ ì¶”ì¶œí•´ì£¼ì„¸ìš”.
### ex : 'http://localhost:3000/invite/0b0fcd90-07e7-4f4f-bd51-8cd6e9659ef9' ì´ë¼ë©´ ë’¤ì—
### 0b0fcd90-07e7-4f4f-bd51-8cd6e9659ef9 ë§Œ ë³µì‚¬í•˜ì—¬ token ì— ë¶™ì—¬ë„£ê³  í…ŒìŠ¤íŠ¸ë¥¼ ë‹¨ë…ìœ¼ë¡œ ëŒë¦¬ì‹œë©´ ë©ë‹ˆë‹¤.
### ================================================================

# @name ì´ˆëŒ€ìˆ˜ë½
POST {{baseUrl}}/api/invitation/accept
Content-Type: application/json
Authorization: Bearer {{memberToken}}

{
  "token": "0b0fcd90-07e7-4f4f-bd51-8cd6e9659ef9"
}

> {%
    console.log("âœ… [6/7] ì´ˆëŒ€ ìˆ˜ë½ ì„±ê³µ");
    console.log("    - ì‚¬ìš©ëœ í† í°:", "{{invitationToken}}".substring(0, 50) + "...");
    console.log("    - ì—…ì²´ëª…:", response.body.data.businessName);
    console.log("    - ë¶€ì—¬ëœ ê¶Œí•œ:", response.body.data.role);
    console.log("\nðŸ’¡ ì´ë©”ì¼ ë§í¬ê°€ ì •ìƒ ìž‘ë™í–ˆìŠµë‹ˆë‹¤!");
%}

###

### ================================================================
### 7. ì‚¬ìž¥ì´ êµ¬ì„±ì› ëª©ë¡ í™•ì¸ (2ëª…)
### ================================================================

# @name êµ¬ì„±ì›ëª©ë¡
GET {{baseUrl}}/api/business/{{businessId}}/members
Authorization: Bearer {{ownerToken}}

> {%
    console.log("âœ… [7/7] êµ¬ì„±ì› ëª©ë¡ ì¡°íšŒ ì„±ê³µ");
    console.log("    - ì „ì²´ êµ¬ì„±ì› ìˆ˜:", response.body.data.totalMembers);
    response.body.data.members.forEach((member, idx) => {
        console.log(`    [${idx + 1}] ${member.name} (${member.role})`);
    });
    console.log("\nðŸŽ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ!");
%}

###
