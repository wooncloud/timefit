### ì˜ˆì•½ ì·¨ì†Œ API í…ŒìŠ¤íŠ¸

### 1. ê³ ê° íšŒì›ê°€ì…
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "cancel-customer@timefit.com",
  "password": "SecureP@ss123!",
  "name": "ì˜ˆì•½ì·¨ì†Œê³ ê°",
  "phoneNumber": "010-1111-2222",
  "businessName": "ê³ ê° ê°œì¸ì—…ì²´",
  "businessType": "ê°œì¸",
  "businessNumber": "111-11-11111",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ê³ ê°ë¡œ 111",
  "contactPhone": "02-1111-1111",
  "description": "ì˜ˆì•½ ì·¨ì†Œ í…ŒìŠ¤íŠ¸ìš© ê³ ê° ê°œì¸ì—…ì²´"
}

### 2. ê³ ê° ë¡œê·¸ì¸
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "cancel-customer@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const token = response.headers.valueOf("x-client-token");
    console.log("ê³ ê° í† í°:", token);
    client.global.set("customerToken", token);
%}

### 3. ì—…ì²´ íšŒì›ê°€ì…
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "cancel-business@timefit.com",
  "password": "SecureP@ss123!",
  "name": "ì˜ˆì•½ì·¨ì†Œì—…ì²´",
  "phoneNumber": "010-2222-3333",
  "businessName": "ì·¨ì†Œ í…ŒìŠ¤íŠ¸ í—¬ìŠ¤ì¥",
  "businessType": "í—¬ìŠ¤ì¥",
  "businessNumber": "222-22-22222",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í—¬ìŠ¤ë¡œ 222",
  "contactPhone": "02-2222-2222",
  "description": "ì˜ˆì•½ ì·¨ì†Œ í…ŒìŠ¤íŠ¸ìš© í—¬ìŠ¤ì¥"
}

### 4. ì—…ì²´ ë¡œê·¸ì¸
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "cancel-business@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const businessToken = response.headers.valueOf("x-client-token");
    console.log("ì—…ì²´ í† í°:", businessToken);
    client.global.set("businessToken", businessToken);

    if (response.body.data && response.body.data.businesses && response.body.data.businesses.length > 0) {
        const businessId = response.body.data.businesses[0].businessId;
        console.log("ì—…ì²´ ID:", businessId);
        client.global.set("businessId", businessId);
    }
%}

### 5. ì—…ì²´ ì˜ì—…ì‹œê°„ ì„¤ì •
PUT http://localhost:8080/api/schedule/operating-hours?businessId={{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessHours": [
    {
      "dayOfWeek": 1,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 2,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 3,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 4,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 5,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 6,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 0,
      "openTime": null,
      "closeTime": null,
      "isClosed": true
    }
  ]
}

### 6. ì˜ˆì•½ ìŠ¬ë¡¯ ìƒì„± (8ì›” 20ì¼)
POST http://localhost:8080/api/schedule/available-slots?businessId={{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "slotDate": "2025-08-20",
  "startTime": "14:00",
  "endTime": "15:00",
  "capacity": 3
}

> {%
    if (response.body.data) {
        console.log("ì²« ë²ˆì§¸ ìŠ¬ë¡¯ ìƒì„±:", response.body.data.slotId);
        client.global.set("firstSlotId", response.body.data.slotId);
    }
%}

### 7. ì˜ˆì•½ ìŠ¬ë¡¯ ìƒì„± (8ì›” 21ì¼)
POST http://localhost:8080/api/schedule/available-slots?businessId={{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "slotDate": "2025-08-21",
  "startTime": "10:00",
  "endTime": "11:30",
  "capacity": 2
}

> {%
    if (response.body.data) {
        console.log("ë‘ ë²ˆì§¸ ìŠ¬ë¡¯ ìƒì„±:", response.body.data.slotId);
        client.global.set("secondSlotId", response.body.data.slotId);
    }
%}

### 8. ì²« ë²ˆì§¸ ì˜ˆì•½ ìƒì„± (PENDING ìƒíƒœ)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId}}",
  "availableSlotId": "{{firstSlotId}}",
  "reservationDate": "2025-08-20",
  "reservationTime": "14:00",
  "durationMinutes": 60,
  "totalPrice": 50000,
  "customerName": "ì˜ˆì•½ì·¨ì†Œê³ ê°",
  "customerPhone": "010-1111-2222",
  "notes": "ì²« ë²ˆì§¸ ì˜ˆì•½ - ì·¨ì†Œ í…ŒìŠ¤íŠ¸ìš©"
}

> {%
    if (response.body.data) {
        console.log("âœ… ì²« ë²ˆì§¸ ì˜ˆì•½ ìƒì„± ì„±ê³µ");
        console.log("ì˜ˆì•½ ID:", response.body.data.reservationId);
        client.global.set("firstReservationId", response.body.data.reservationId);
    }
%}

### 9. ë‘ ë²ˆì§¸ ì˜ˆì•½ ìƒì„± (PENDING ìƒíƒœ)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId}}",
  "availableSlotId": "{{secondSlotId}}",
  "reservationDate": "2025-08-21",
  "reservationTime": "10:00",
  "durationMinutes": 90,
  "totalPrice": 70000,
  "customerName": "ì˜ˆì•½ì·¨ì†Œê³ ê°",
  "customerPhone": "010-1111-2222",
  "notes": "ë‘ ë²ˆì§¸ ì˜ˆì•½ - ì·¨ì†Œ í…ŒìŠ¤íŠ¸ìš©"
}

> {%
    if (response.body.data) {
        console.log("âœ… ë‘ ë²ˆì§¸ ì˜ˆì•½ ìƒì„± ì„±ê³µ");
        console.log("ì˜ˆì•½ ID:", response.body.data.reservationId);
        client.global.set("secondReservationId", response.body.data.reservationId);
    }
%}

### 10. ì„¸ ë²ˆì§¸ ì˜ˆì•½ ìƒì„± (ê¶Œí•œ í…ŒìŠ¤íŠ¸ìš©)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId}}",
  "availableSlotId": "{{firstSlotId}}",
  "reservationDate": "2025-08-20",
  "reservationTime": "14:00",
  "durationMinutes": 60,
  "totalPrice": 50000,
  "customerName": "ì˜ˆì•½ì·¨ì†Œê³ ê°",
  "customerPhone": "010-1111-2222",
  "notes": "ì„¸ ë²ˆì§¸ ì˜ˆì•½ - ê¶Œí•œ í…ŒìŠ¤íŠ¸ìš©"
}

> {%
    if (response.body.data) {
        console.log("âœ… ì„¸ ë²ˆì§¸ ì˜ˆì•½ ìƒì„± ì„±ê³µ");
        console.log("ì˜ˆì•½ ID:", response.body.data.reservationId);
        client.global.set("thirdReservationId", response.body.data.reservationId);
    }
%}

### 11. ì·¨ì†Œ ì „ ì˜ˆì•½ ìƒíƒœ í™•ì¸
GET http://localhost:8080/api/reservations/{{firstReservationId}}
x-client-token: {{customerToken}}

> {%
    console.log("ì·¨ì†Œ ì „ ì˜ˆì•½ ìƒíƒœ:", JSON.stringify(response.body, null, 2));
    if (response.body.data) {
        console.log("âœ… ì·¨ì†Œ ì „ ìƒíƒœ í™•ì¸");
        console.log("ì˜ˆì•½ ë²ˆí˜¸:", response.body.data.reservationNumber);
        console.log("í˜„ì¬ ìƒíƒœ:", response.body.data.status);
        console.log("ì˜ˆì•½ ì¼ì‹œ:", response.body.data.reservationDate, response.body.data.reservationTime);
    }
%}

### 12. ì˜ˆì•½ ì·¨ì†Œ - ì„±ê³µ ì¼€ì´ìŠ¤ (ê°œì¸ ì‚¬ì •)
DELETE http://localhost:8080/api/reservations/{{firstReservationId}}
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "reason": "ê¸‰í•œ ì—…ë¬´ê°€ ìƒê²¨ì„œ ì°¸ì„í•  ìˆ˜ ì—†ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤."
}

> {%
    console.log("ì²« ë²ˆì§¸ ì˜ˆì•½ ì·¨ì†Œ ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    if (response.body.data) {
        console.log("âœ… ì²« ë²ˆì§¸ ì˜ˆì•½ ì·¨ì†Œ ì„±ê³µ");
        console.log("ì˜ˆì•½ ID:", response.body.data.reservationId);
        console.log("ì´ì „ ìƒíƒœ:", response.body.data.previousStatus);
        console.log("í˜„ì¬ ìƒíƒœ:", response.body.data.currentStatus);
        console.log("ì·¨ì†Œ ì‚¬ìœ :", response.body.data.reason);
        console.log("ì·¨ì†Œ ì‹œê°„:", response.body.data.cancelledAt);

        if (response.body.data.currentStatus === "CANCELLED") {
            console.log("ğŸ”´ ì˜ˆì•½ì´ ì •ìƒì ìœ¼ë¡œ ì·¨ì†Œë¨");
        }
    } else {
        console.log("âŒ ì²« ë²ˆì§¸ ì˜ˆì•½ ì·¨ì†Œ ì‹¤íŒ¨");
    }
%}

### 13. ì˜ˆì•½ ì·¨ì†Œ - ì„±ê³µ ì¼€ì´ìŠ¤ (ê±´ê°•ìƒ ì´ìœ )
DELETE http://localhost:8080/api/reservations/{{secondReservationId}}
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "reason": "ëª¸ì´ ì•„íŒŒì„œ ìš´ë™ì„ í•  ìˆ˜ ì—†ëŠ” ìƒíƒœì…ë‹ˆë‹¤."
}

> {%
    console.log("ë‘ ë²ˆì§¸ ì˜ˆì•½ ì·¨ì†Œ ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    if (response.body.data) {
        console.log("âœ… ë‘ ë²ˆì§¸ ì˜ˆì•½ ì·¨ì†Œ ì„±ê³µ");
        console.log("ì·¨ì†Œ ì‚¬ìœ :", response.body.data.reason);
        console.log("ìƒíƒœ ë³€ê²½:", response.body.data.previousStatus + " â†’ " + response.body.data.currentStatus);
    }
%}

### 14. ì·¨ì†Œ í›„ ì˜ˆì•½ ìƒíƒœ í™•ì¸
GET http://localhost:8080/api/reservations/{{firstReservationId}}
x-client-token: {{customerToken}}

> {%
    console.log("ì·¨ì†Œ í›„ ì˜ˆì•½ ìƒíƒœ:", JSON.stringify(response.body, null, 2));
    if (response.body.data) {
        console.log("âœ… ì·¨ì†Œ í›„ ìƒíƒœ í™•ì¸");
        console.log("í˜„ì¬ ìƒíƒœ:", response.body.data.status);
        console.log("ì·¨ì†Œ ì‹œê°„:", response.body.data.cancelledAt);

        if (response.body.data.status === "CANCELLED") {
            console.log("ğŸ”´ ì˜ˆì•½ ìƒíƒœê°€ CANCELLEDë¡œ ì •ìƒ ë³€ê²½ë¨");
        }
    }
%}

### 15. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ì´ë¯¸ ì·¨ì†Œëœ ì˜ˆì•½ ë‹¤ì‹œ ì·¨ì†Œ
DELETE http://localhost:8080/api/reservations/{{firstReservationId}}
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "reason": "ì´ë¯¸ ì·¨ì†Œëœ ì˜ˆì•½ì„ ë‹¤ì‹œ ì·¨ì†Œ ì‹œë„"
}

> {%
    console.log("ì´ë¯¸ ì·¨ì†Œëœ ì˜ˆì•½ ì¬ì·¨ì†Œ ì‘ë‹µ ìƒíƒœ:", response.status);
    console.log("ì´ë¯¸ ì·¨ì†Œëœ ì˜ˆì•½ ì¬ì·¨ì†Œ ì‘ë‹µ:", JSON.stringify(response.body, null, 2));

    if (response.status === 400) {
        console.log("âœ… ì´ë¯¸ ì·¨ì†Œëœ ì˜ˆì•½ ì¬ì·¨ì†Œ ì°¨ë‹¨ ì„±ê³µ");
    } else {
        console.log("âš ï¸ ì´ë¯¸ ì·¨ì†Œëœ ì˜ˆì•½ ì¬ì·¨ì†Œê°€ í—ˆìš©ë¨");
    }
%}

### 16. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆì•½ ì·¨ì†Œ
DELETE http://localhost:8080/api/reservations/00000000-0000-0000-0000-000000000000
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "reason": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆì•½ ì·¨ì†Œ ì‹œë„"
}

> {%
    console.log("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆì•½ ì·¨ì†Œ ì‘ë‹µ ìƒíƒœ:", response.status);
    if (response.status === 404) {
        console.log("âœ… ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆì•½ ì·¨ì†Œ ì°¨ë‹¨ ì„±ê³µ");
    }
%}

### 17. ë‹¤ë¥¸ ê³ ê° íšŒì›ê°€ì… (ê¶Œí•œ í…ŒìŠ¤íŠ¸ìš©)
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "another-cancel-customer@timefit.com",
  "password": "SecureP@ss123!",
  "name": "ë‹¤ë¥¸ì·¨ì†Œê³ ê°",
  "phoneNumber": "010-3333-4444",
  "businessName": "ë‹¤ë¥¸ ê³ ê°ì—…ì²´",
  "businessType": "ê°œì¸",
  "businessNumber": "333-33-33333",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ë‹¤ë¥¸ë¡œ 333",
  "contactPhone": "02-3333-3333",
  "description": "ë‹¤ë¥¸ ê³ ê° ì—…ì²´"
}

### 18. ë‹¤ë¥¸ ê³ ê° ë¡œê·¸ì¸
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "another-cancel-customer@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const anotherToken = response.headers.valueOf("x-client-token");
    console.log("ë‹¤ë¥¸ ê³ ê° í† í°:", anotherToken);
    client.global.set("anotherCustomerToken", anotherToken);
%}

### 19. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ë‹¤ë¥¸ ê³ ê°ì´ ì˜ˆì•½ ì·¨ì†Œ ì‹œë„ (ê¶Œí•œ ì—†ìŒ)
DELETE http://localhost:8080/api/reservations/{{thirdReservationId}}
Content-Type: application/json
x-client-token: {{anotherCustomerToken}}

{
  "reason": "ë‹¤ë¥¸ ê³ ê°ì´ ì˜ˆì•½ ì·¨ì†Œë¥¼ ì‹œë„í•©ë‹ˆë‹¤."
}

> {%
    console.log("ë‹¤ë¥¸ ê³ ê°ì˜ ì˜ˆì•½ ì·¨ì†Œ ì‹œë„ ì‘ë‹µ ìƒíƒœ:", response.status);
    if (response.status === 403 || response.status === 404) {
        console.log("âœ… ë‹¤ë¥¸ ê³ ê°ì˜ ì˜ˆì•½ ì·¨ì†Œ ì°¨ë‹¨ ì„±ê³µ");
    } else {
        console.log("âš ï¸ ë‹¤ë¥¸ ê³ ê°ì˜ ì˜ˆì•½ ì·¨ì†Œê°€ í—ˆìš©ë¨ - ë³´ì•ˆ ë¬¸ì œ");
    }
%}

### 20. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ì·¨ì†Œ ì‚¬ìœ  ëˆ„ë½
DELETE http://localhost:8080/api/reservations/{{thirdReservationId}}
Content-Type: application/json
x-client-token: {{customerToken}}

{}

> {%
    console.log("ì·¨ì†Œ ì‚¬ìœ  ëˆ„ë½ ì‘ë‹µ ìƒíƒœ:", response.status);
    console.log("ì·¨ì†Œ ì‚¬ìœ  ëˆ„ë½ ì‘ë‹µ:", JSON.stringify(response.body, null, 2));

    if (response.status === 400) {
        console.log("âœ… ì·¨ì†Œ ì‚¬ìœ  ëˆ„ë½ ê²€ì¦ ì„±ê³µ");
    } else {
        console.log("âš ï¸ ì·¨ì†Œ ì‚¬ìœ  ì—†ì´ ì·¨ì†Œê°€ í—ˆìš©ë¨");
    }
%}

### 21. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ë¹ˆ ì·¨ì†Œ ì‚¬ìœ 
DELETE http://localhost:8080/api/reservations/{{thirdReservationId}}
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "reason": ""
}

> {%
    console.log("ë¹ˆ ì·¨ì†Œ ì‚¬ìœ  ì‘ë‹µ ìƒíƒœ:", response.status);
    if (response.status === 400) {
        console.log("âœ… ë¹ˆ ì·¨ì†Œ ì‚¬ìœ  ê²€ì¦ ì„±ê³µ");
    }
%}

### 22. ì˜ˆì•½ ëª©ë¡ì—ì„œ ì·¨ì†Œëœ ì˜ˆì•½ í™•ì¸
GET http://localhost:8080/api/reservations
x-client-token: {{customerToken}}

> {%
    console.log("ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ:", JSON.stringify(response.body, null, 2));
    if (response.body.data && response.body.data.reservations) {
        console.log("âœ… ì˜ˆì•½ ëª©ë¡ì—ì„œ ì·¨ì†Œ ìƒíƒœ í™•ì¸");

        const cancelledReservations = response.body.data.reservations.filter(r => r.status === "CANCELLED");
        console.log("ì·¨ì†Œëœ ì˜ˆì•½ ìˆ˜:", cancelledReservations.length);

        cancelledReservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ì·¨ì†Œëœ ì˜ˆì•½:`);
            console.log(`   - ì˜ˆì•½ë²ˆí˜¸: ${reservation.reservationNumber}`);
            console.log(`   - ìƒíƒœ: ${reservation.status}`);
            console.log(`   - ì›ë˜ ì¼ì‹œ: ${reservation.reservationDate} ${reservation.reservationTime}`);
        });

        const activeReservations = response.body.data.reservations.filter(r => r.status !== "CANCELLED");
        console.log("í™œì„± ì˜ˆì•½ ìˆ˜:", activeReservations.length);
    }
%}

### 23. ì·¨ì†Œëœ ì˜ˆì•½ì˜ ìŠ¬ë¡¯ ìš©ëŸ‰ ë³µì› í™•ì¸
GET http://localhost:8080/api/schedule/available-slots?businessId={{businessId}}&date=2025-08-20

> {%
    console.log("ìŠ¬ë¡¯ ìš©ëŸ‰ ë³µì› í™•ì¸:", JSON.stringify(response.body, null, 2));
    if (response.body.data && response.body.data.slots && response.body.data.slots.length > 0) {
        const slot = response.body.data.slots[0];
        console.log("âœ… ìŠ¬ë¡¯ ìƒíƒœ í™•ì¸");
        console.log("ì´ ìš©ëŸ‰:", slot.capacity);
        console.log("í˜„ì¬ ì˜ˆì•½ ìˆ˜:", slot.currentBookings);
        console.log("ì˜ˆì•½ ê°€ëŠ¥ ì—¬ë¶€:", slot.isAvailable);

        // ì·¨ì†Œë¡œ ì¸í•´ ìš©ëŸ‰ì´ ë³µì›ë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (slot.currentBookings < slot.capacity) {
            console.log("ğŸŸ¢ ì·¨ì†Œë¡œ ì¸í•œ ìŠ¬ë¡¯ ìš©ëŸ‰ ë³µì› í™•ì¸ë¨");
        }
    }
%}
