### 1. 고객 사용자 회원가입 (예약 조회자)
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "my-reservations@timefit.com",
  "password": "SecureP@ss123!",
  "name": "예약조회고객",
  "phoneNumber": "010-1111-2222",
  "businessName": "고객 개인업체",
  "businessType": "개인",
  "businessNumber": "111-11-11111",
  "address": "서울시 강남구 고객로 111",
  "contactPhone": "02-1111-1111",
  "description": "고객용 개인 업체"
}

### 2. 고객 로그인 (토큰 획득)
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "my-reservations@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const token = response.headers.valueOf("x-client-token");
    console.log("고객 토큰:", token);
    client.global.set("customerToken", token);
%}

### 3. 업체 1 회원가입 (헬스장)
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "gym-business@timefit.com",
  "password": "SecureP@ss123!",
  "name": "헬스장사장",
  "phoneNumber": "010-2222-3333",
  "businessName": "파워짐 강남점",
  "businessType": "헬스장",
  "businessNumber": "222-22-22222",
  "address": "서울시 강남구 헬스로 222",
  "contactPhone": "02-2222-2222",
  "description": "헬스장입니다"
}

### 4. 업체 1 로그인 (businessId 획득)
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "gym-business@timefit.com",
  "password": "SecureP@ss123!"
}
> {%

    console.log("업체 1 로그인 전체 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.businesses && response.body.data.businesses.length > 0) {
        const businessId1 = response.body.data.businesses[0].businessId;
        console.log("업체 1 ID:", businessId1);
        client.global.set("businessId1", businessId1);
    }
%}

### 5. 업체 2 회원가입 (카페)
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "cafe-business@timefit.com",
  "password": "SecureP@ss123!",
  "name": "카페사장",
  "phoneNumber": "010-3333-4444",
  "businessName": "스타벅스 역삼점",
  "businessType": "카페",
  "businessNumber": "333-33-33333",
  "address": "서울시 강남구 카페로 333",
  "contactPhone": "02-3333-3333",
  "description": "카페입니다"
}

### 6. 업체 2 로그인 (businessId 획득)
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "cafe-business@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    if (response.body.data && response.body.data.businesses && response.body.data.businesses.length > 0) {
        const businessId2 = response.body.data.businesses[0].businessId;
        console.log("업체 2 ID:", businessId2);
        client.global.set("businessId2", businessId2);
    }
%}

### 7. 업체 3 회원가입 (미용실)
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "beauty-business@timefit.com",
  "password": "SecureP@ss123!",
  "name": "미용실사장",
  "phoneNumber": "010-4444-5555",
  "businessName": "뷰티살롱 강남",
  "businessType": "미용실",
  "businessNumber": "444-44-44444",
  "address": "서울시 강남구 미용로 444",
  "contactPhone": "02-4444-4444",
  "description": "미용실입니다"
}

### 8. 업체 3 로그인 (businessId 획득)
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "beauty-business@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    if (response.body.data && response.body.data.businesses && response.body.data.businesses.length > 0) {
        const businessId3 = response.body.data.businesses[0].businessId;
        console.log("업체 3 ID:", businessId3);
        client.global.set("businessId3", businessId3);
    }
%}

### 9. 테스트 예약 생성 - 헬스장 1월 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId1}}",
  "availableSlotId": "11111111-1111-1111-1111-111111111111",
  "reservationDate": "2025-01-15",
  "reservationTime": "14:00",
  "durationMinutes": 60,
  "totalPrice": 50000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "헬스장 1월 예약"
}

### 10. 테스트 예약 생성 - 헬스장 2월 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId1}}",
  "availableSlotId": "22222222-2222-2222-2222-222222222222",
  "reservationDate": "2025-02-10",
  "reservationTime": "10:00",
  "durationMinutes": 90,
  "totalPrice": 70000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "헬스장 2월 예약"
}

### 11. 테스트 예약 생성 - 카페 1월 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId2}}",
  "availableSlotId": "33333333-3333-3333-3333-333333333333",
  "reservationDate": "2025-01-20",
  "reservationTime": "16:00",
  "durationMinutes": 120,
  "totalPrice": 30000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "카페 1월 예약"
}

### 12. 테스트 예약 생성 - 카페 3월 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId2}}",
  "availableSlotId": "44444444-4444-4444-4444-444444444444",
  "reservationDate": "2025-03-05",
  "reservationTime": "18:00",
  "durationMinutes": 60,
  "totalPrice": 25000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "카페 3월 예약"
}

### 13. 테스트 예약 생성 - 미용실 2월 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId3}}",
  "availableSlotId": "55555555-5555-5555-5555-555555555555",
  "reservationDate": "2025-02-15",
  "reservationTime": "11:00",
  "durationMinutes": 150,
  "totalPrice": 80000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "미용실 2월 예약"
}

### 14. 테스트 예약 생성 - 미용실 4월 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId3}}",
  "availableSlotId": "66666666-6666-6666-6666-666666666666",
  "reservationDate": "2025-04-10",
  "reservationTime": "13:00",
  "durationMinutes": 180,
  "totalPrice": 120000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "미용실 4월 예약"
}

### 15. 테스트 예약 생성 - 헬스장 과거 예약 (PENDING)
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId1}}",
  "availableSlotId": "77777777-7777-7777-7777-777777777777",
  "reservationDate": "2025-01-05",
  "reservationTime": "09:00",
  "durationMinutes": 60,
  "totalPrice": 50000,
  "customerName": "예약조회고객",
  "customerPhone": "010-1111-2222",
  "notes": "헬스장 과거 예약"
}

### 16. 내 예약 목록 조회 - 전체 조회 (필터 없음)
GET http://localhost:8080/api/reservations
x-client-token: {{customerToken}}

> {%
    console.log("전체 예약 조회 응답 상태:", response.status);
    console.log("전체 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("총 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("전체 예약 개수:", response.body.data.pagination ? response.body.data.pagination.totalElements : 0);
        console.log("총 페이지 수:", response.body.data.pagination ? response.body.data.pagination.totalPages : 0);
        console.log("현재 페이지:", response.body.data.pagination ? response.body.data.pagination.currentPage : 0);

        if (response.body.data.reservations) {
            console.log("\n=== 전체 예약 목록 ===");
            response.body.data.reservations.forEach((reservation, index) => {
                console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime} (${reservation.status})`);
            });
        }
    }
%}

### 17. 내 예약 목록 조회 - 상태 필터 (PENDING)
GET http://localhost:8080/api/reservations?status=PENDING
x-client-token: {{customerToken}}

> {%
    console.log("PENDING 상태 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("PENDING 예약 수:", response.body.data.reservations.length);
        console.log("\n=== PENDING 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime} (${reservation.status})`);
        });
    }
%}

### 18. 내 예약 목록 조회 - 상태 필터 (CONFIRMED)
GET http://localhost:8080/api/reservations?status=CONFIRMED
x-client-token: {{customerToken}}

> {%
    console.log("CONFIRMED 상태 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("CONFIRMED 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("총 개수:", response.body.data.pagination ? response.body.data.pagination.totalElements : 0);

        if (response.body.data.pagination && response.body.data.pagination.totalElements === 0) {
            console.log("✅ CONFIRMED 상태 예약 없음 (모든 예약이 PENDING 상태)");
        }
    }
%}

### 19. 내 예약 목록 조회 - 1월 예약만 (날짜 범위 필터)
GET http://localhost:8080/api/reservations?startDate=2025-01-01&endDate=2025-01-31
x-client-token: {{customerToken}}

> {%
    console.log("1월 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("1월 예약 수:", response.body.data.reservations.length);
        console.log("\n=== 1월 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
        });
    }
%}

### 20. 내 예약 목록 조회 - 2월 예약만 (날짜 범위 필터)
GET http://localhost:8080/api/reservations?startDate=2025-02-01&endDate=2025-02-28
x-client-token: {{customerToken}}

> {%
    console.log("2월 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("2월 예약 수:", response.body.data.reservations.length);
        console.log("\n=== 2월 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
        });
    }
%}

### 21. 내 예약 목록 조회 - 헬스장 예약만 (업체 필터)
GET http://localhost:8080/api/reservations?businessId={{businessId1}}
x-client-token: {{customerToken}}

> {%
    console.log("헬스장 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("헬스장 예약 수:", response.body.data.reservations.length);
        console.log("\n=== 헬스장 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
        });
    }
%}

### 22. 내 예약 목록 조회 - 카페 예약만 (업체 필터)
GET http://localhost:8080/api/reservations?businessId={{businessId2}}
x-client-token: {{customerToken}}

> {%
    console.log("카페 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("카페 예약 수:", response.body.data.reservations.length);
        console.log("\n=== 카페 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
        });
    }
%}

### 23. 내 예약 목록 조회 - 복합 필터 (1월 PENDING)
GET http://localhost:8080/api/reservations?status=PENDING&startDate=2025-01-01&endDate=2025-01-31
x-client-token: {{customerToken}}

> {%
    console.log("1월 PENDING 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("1월 PENDING 예약 수:", response.body.data.reservations.length);
        console.log("\n=== 1월 PENDING 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime} (${reservation.status})`);
        });
    }
%}

### 24. 내 예약 목록 조회 - 복합 필터 (헬스장 + 2월)
GET http://localhost:8080/api/reservations?businessId={{businessId1}}&startDate=2025-02-01&endDate=2025-02-28
x-client-token: {{customerToken}}

> {%
    console.log("헬스장 2월 예약 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("헬스장 2월 예약 수:", response.body.data.reservations.length);
        console.log("\n=== 헬스장 2월 예약 목록 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
        });
    }
%}

### 25. 내 예약 목록 조회 - 페이징 테스트 (page=0, size=3)
GET http://localhost:8080/api/reservations?page=0&size=3
x-client-token: {{customerToken}}

> {%
    console.log("페이징 테스트 (size=3) 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("첫 번째 페이지 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("총 예약 수:", response.body.data.pagination ? response.body.data.pagination.totalElements : 0);
        console.log("총 페이지 수:", response.body.data.pagination ? response.body.data.pagination.totalPages : 0);
        console.log("다음 페이지 존재:", response.body.data.pagination ? response.body.data.pagination.hasNext : false);
        console.log("이전 페이지 존재:", response.body.data.pagination ? response.body.data.pagination.hasPrevious : false);

        if (response.body.data.reservations) {
            console.log("\n=== 첫 번째 페이지 (최신 3개) ===");
            response.body.data.reservations.forEach((reservation, index) => {
                console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
            });
        }
    }
%}

### 26. 내 예약 목록 조회 - 두 번째 페이지
GET http://localhost:8080/api/reservations?page=1&size=3
x-client-token: {{customerToken}}

> {%
    console.log("두 번째 페이지 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("두 번째 페이지 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("현재 페이지:", response.body.data.pagination ? response.body.data.pagination.currentPage : 0);
        console.log("다음 페이지 존재:", response.body.data.pagination ? response.body.data.pagination.hasNext : false);
        console.log("이전 페이지 존재:", response.body.data.pagination ? response.body.data.pagination.hasPrevious : false);

        if (response.body.data.reservations) {
            console.log("\n=== 두 번째 페이지 (다음 3개) ===");
            response.body.data.reservations.forEach((reservation, index) => {
                console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
            });
        }
    }
%}

### 27. 내 예약 목록 조회 - 세 번째 페이지
GET http://localhost:8080/api/reservations?page=2&size=3
x-client-token: {{customerToken}}

> {%
    console.log("세 번째 페이지 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("세 번째 페이지 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("현재 페이지:", response.body.data.pagination ? response.body.data.pagination.currentPage : 0);
        console.log("다음 페이지 존재:", response.body.data.pagination ? response.body.data.pagination.hasNext : false);

        if (response.body.data.reservations) {
            console.log("\n=== 세 번째 페이지 (나머지) ===");
            response.body.data.reservations.forEach((reservation, index) => {
                console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
            });
        }
    }
%}### 28. 실패 케이스 - 토큰 없이 조회
GET http://localhost:8080/api/reservations

> {%
    console.log("토큰 없는 조회 응답 상태:", response.status);
    console.log("토큰 없는 조회 응답:", JSON.stringify(response.body, null, 2));
%}

### 29. 실패 케이스 - 잘못된 상태 값
GET http://localhost:8080/api/reservations?status=INVALID_STATUS
x-client-token: {{customerToken}}

> {%
    console.log("잘못된 상태 값 조회 응답 상태:", response.status);
    console.log("잘못된 상태 값 조회 응답:", JSON.stringify(response.body, null, 2));
%}

### 30. 실패 케이스 - 잘못된 날짜 형식
GET http://localhost:8080/api/reservations?startDate=invalid-date
x-client-token: {{customerToken}}

> {%
    console.log("잘못된 날짜 형식 조회 응답 상태:", response.status);
    console.log("잘못된 날짜 형식 조회 응답:", JSON.stringify(response.body, null, 2));
%}

### 31. 실패 케이스 - 잘못된 페이징 파라미터 (음수 페이지)
GET http://localhost:8080/api/reservations?page=-1&size=10
x-client-token: {{customerToken}}

> {%
    console.log("음수 페이지 조회 응답 상태:", response.status);
    console.log("음수 페이지 조회 응답:", JSON.stringify(response.body, null, 2));
%}

### 32. 실패 케이스 - 잘못된 페이징 파라미터 (0 크기)
GET http://localhost:8080/api/reservations?page=0&size=0
x-client-token: {{customerToken}}

> {%
    console.log("0 크기 페이지 조회 응답 상태:", response.status);
    console.log("0 크기 페이지 조회 응답:", JSON.stringify(response.body, null, 2));
%}

### 33. 실패 케이스 - 과도한 페이지 크기
GET http://localhost:8080/api/reservations?page=0&size=1000
x-client-token: {{customerToken}}

> {%
    console.log("과도한 페이지 크기 조회 응답 상태:", response.status);
    console.log("과도한 페이지 크기 조회 응답:", JSON.stringify(response.body, null, 2));
%}

### 34. 검색 결과 없음 테스트 - 미래 날짜 범위
GET http://localhost:8080/api/reservations?startDate=2025-12-01&endDate=2025-12-31
x-client-token: {{customerToken}}

> {%
    console.log("미래 날짜 범위 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("미래 날짜 범위 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("총 예약 개수:", response.body.data.pagination ? response.body.data.pagination.totalElements : 0);

        if (response.body.data.pagination && response.body.data.pagination.totalElements === 0) {
            console.log("✅ 검색 결과 없음 케이스 정상 처리");
        }
    }
%}

### 35. 검색 결과 없음 테스트 - 존재하지 않는 업체
GET http://localhost:8080/api/reservations?businessId=00000000-0000-0000-0000-000000000000
x-client-token: {{customerToken}}

> {%
    console.log("존재하지 않는 업체 조회 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("존재하지 않는 업체 예약 수:", response.body.data.reservations ? response.body.data.reservations.length : 0);
        console.log("총 예약 개수:", response.body.data.pagination ? response.body.data.pagination.totalElements : 0);

        if (response.body.data.pagination && response.body.data.pagination.totalElements === 0) {
            console.log("✅ 존재하지 않는 업체 필터 결과 없음 정상 처리");
        }
    }
%}

### 36. 정렬 확인 테스트 - 날짜 내림차순 확인
GET http://localhost:8080/api/reservations?size=10
x-client-token: {{customerToken}}

> {%
    console.log("정렬 확인 테스트 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("\n=== 예약 날짜 정렬 순서 확인 ===");
        response.body.data.reservations.forEach((reservation, index) => {
            console.log(`${index + 1}. ${reservation.businessName} - ${reservation.reservationDate} ${reservation.reservationTime}`);
        });

        // 정렬 순서 검증 (날짜 내림차순)
        const dates = response.body.data.reservations.map(r => r.reservationDate);
        let isSorted = true;
        for (let i = 0; i < dates.length - 1; i++) {
            if (dates[i] < dates[i + 1]) {
                isSorted = false;
                break;
            }
        }

        if (isSorted) {
            console.log("✅ 날짜 내림차순 정렬 확인");
        } else {
            console.log("⚠️ 정렬 순서가 올바르지 않음");
        }
    }
%}

### 37. 최종 통계 확인 - 업체별 예약 수 집계
GET http://localhost:8080/api/reservations
x-client-token: {{customerToken}}

> {%
    console.log("최종 통계 확인 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data && response.body.data.reservations) {
        console.log("\n=== 최종 예약 통계 ===");
        console.log("총 예약 수:", response.body.data.reservations.length);

        // 업체별 집계
        const businessCount = response.body.data.reservations.reduce((acc, reservation) => {
            acc[reservation.businessName] = (acc[reservation.businessName] || 0) + 1;
            return acc;
        }, {});

        console.log("업체별 예약 수:");
        Object.entries(businessCount).forEach(([businessName, count]) => {
            console.log(`- ${businessName}: ${count}개`);
        });

        // 월별 집계
        const monthCount = response.body.data.reservations.reduce((acc, reservation) => {
            const month = reservation.reservationDate.substring(0, 7); // YYYY-MM
            acc[month] = (acc[month] || 0) + 1;
            return acc;
        }, {});

        console.log("월별 예약 수:");
        Object.entries(monthCount).forEach(([month, count]) => {
            console.log(`- ${month}: ${count}개`);
        });

        // 상태별 집계
        const statusCount = response.body.data.reservations.reduce((acc, reservation) => {
            acc[reservation.status] = (acc[reservation.status] || 0) + 1;
            return acc;
        }, {});

        console.log("상태별 예약 수:");
        Object.entries(statusCount).forEach(([status, count]) => {
            console.log(`- ${status}: ${count}개`);
        });
    }
%}