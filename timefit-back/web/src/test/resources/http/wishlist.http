### ================================================================
### Timefit ì°œ ê´€ë¦¬ (Wishlist) API í…ŒìŠ¤íŠ¸
### ================================================================
### ì‚¬ìš©ë²•:
### 1. [Setup] ì„¹ì…˜ì˜ ë¡œê·¸ì¸ ìš”ì²­ì„ ë¨¼ì € ì‹¤í–‰
### 2. ì„±ê³µ ì‹œ í† í°ì´ ìë™ ì €ì¥ë¨
### 3. ë‚˜ë¨¸ì§€ í…ŒìŠ¤íŠ¸ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
### ================================================================

@baseUrl = http://localhost:8080
@customerEmail = customer1@timefit.test
@password = password123
@testBusinessId = 30000000-0000-0000-0000-000000000001

### ----------------------------------------------------------------
### [Setup] Customer ë¡œê·¸ì¸ (Token íšë“)
### ----------------------------------------------------------------
### ğŸ‘‰ ì´ ìš”ì²­ì„ ë¨¼ì € ì‹¤í–‰í•˜ì„¸ìš”!
### ----------------------------------------------------------------

# @name login
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "{{customerEmail}}",
  "password": "{{password}}"
}

> {%
    if (response.status === 200) {
        const token = response.body.data?.accessToken;
        if (token) {
            client.global.set("customerToken", token);
            console.log("âœ… ë¡œê·¸ì¸ ì„±ê³µ - Token ì €ì¥ ì™„ë£Œ");
            console.log("ğŸ“Œ Token: " + token.substring(0, 20) + "...");
        } else {
            console.log("âŒ Token ì¶”ì¶œ ì‹¤íŒ¨");
            console.log("Response Body:", JSON.stringify(response.body));
        }
    } else {
        console.log("âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨:", response.status);
        console.log("Response:", JSON.stringify(response.body));
    }
%}

### ================================================================
### [Test 1] ì°œ ì¶”ê°€ (Add Wishlist)
### POST /api/customer/wishlist
### ================================================================
### ğŸ“‹ Businessë¥¼ ì°œ ëª©ë¡ì— ì¶”ê°€
### ================================================================

# @name addWishlist
POST {{baseUrl}}/api/customer/wishlist
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{testBusinessId}}"
}

> {%
    console.log("\n[Test 1] ì°œ ì¶”ê°€ ìš”ì²­");
    if (response.status === 200) {
        console.log("âœ… ì°œ ì¶”ê°€ ì„±ê³µ");
    } else {
        console.log("âŒ ì‹¤íŒ¨:", response.status);
        console.log("Message:", response.body?.message || "No message");
    }
%}

### ================================================================
### [Test 2] ì°œ ì—¬ë¶€ í™•ì¸ (Check Wishlist Status)
### GET /api/customer/wishlist/check/{businessId}
### ================================================================
### ğŸ“‹ íŠ¹ì • Businessê°€ ì°œ ëª©ë¡ì— ìˆëŠ”ì§€ í™•ì¸
### ================================================================

# @name checkWishlist
GET {{baseUrl}}/api/customer/wishlist/check/{{testBusinessId}}
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[Test 2] ì°œ ì—¬ë¶€ í™•ì¸");
    if (response.status === 200) {
        const isWishlisted = response.body.data;
        console.log("âœ… ê²°ê³¼:", isWishlisted ? "ì°œ ë˜ì–´ ìˆìŒ â¤ï¸" : "ì°œ ì•ˆ ë˜ì–´ ìˆìŒ");
    } else {
        console.log("âŒ ì¡°íšŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================
### [Test 3] ì°œ ëª©ë¡ ì¡°íšŒ (Get Wishlist List)
### GET /api/customer/wishlist?page=0&size=20
### ================================================================
### ğŸ“‹ ë‚´ ì°œ ëª©ë¡ ì „ì²´ ì¡°íšŒ (í˜ì´ì§•)
### ================================================================

# @name getWishlistList
GET {{baseUrl}}/api/customer/wishlist?page=0&size=10
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[Test 3] ì°œ ëª©ë¡ ì¡°íšŒ");
    if (response.status === 200) {
        const data = response.body.data;
        console.log("âœ… ì´ ê°œìˆ˜:", data.totalCount);
        console.log("âœ… í˜„ì¬ í˜ì´ì§€:", data.currentPage);
        console.log("âœ… í˜ì´ì§€ í¬ê¸°:", data.pageSize);

        if (data.wishlists && data.wishlists.length > 0) {
            console.log("\nğŸ“‹ ì°œ ëª©ë¡:");
            data.wishlists.forEach((item, idx) => {
                console.log(`  ${idx + 1}. ${item.businessName} (${item.businessId})`);
            });
        } else {
            console.log("ğŸ“­ ì°œ ëª©ë¡ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤");
        }
    } else {
        console.log("âŒ ì¡°íšŒ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================
### [Test 4] ì°œ ì‚­ì œ (Remove Wishlist)
### DELETE /api/customer/wishlist/{businessId}
### ================================================================
### ğŸ“‹ ì°œ ëª©ë¡ì—ì„œ ì œê±°
### ================================================================

# @name removeWishlist
DELETE {{baseUrl}}/api/customer/wishlist/{{testBusinessId}}
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[Test 4] ì°œ ì‚­ì œ ìš”ì²­");
    if (response.status === 200) {
        console.log("âœ… ì°œ ì‚­ì œ ì„±ê³µ");
    } else {
        console.log("âŒ ì‚­ì œ ì‹¤íŒ¨:", response.status);
        console.log("Message:", response.body?.message || "No message");
    }
%}

### ----------------------------------------------------------------
### [Final Check] ì‚­ì œ í›„ ì°œ ì—¬ë¶€ ì¬í™•ì¸
### ----------------------------------------------------------------
### ğŸ“‹ ì‚­ì œê°€ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ ìµœì¢… í™•ì¸
### ----------------------------------------------------------------

# @name finalCheck
GET {{baseUrl}}/api/customer/wishlist/check/{{testBusinessId}}
Authorization: Bearer {{customerToken}}

> {%
    console.log("\n[Final Check] ì‚­ì œ í›„ ì°œ ì—¬ë¶€ ì¬í™•ì¸");
    if (response.status === 200) {
        const isWishlisted = response.body.data;
        if (isWishlisted === false) {
            console.log("âœ… ì‚­ì œ í™•ì¸ë¨ - ì°œ ëª©ë¡ì—ì„œ ì œê±°ë¨");
        } else {
            console.log("âŒ ì—¬ì „íˆ ì¡´ì¬í•¨ - ì‚­ì œê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•ŠìŒ");
        }
    } else {
        console.log("âŒ í™•ì¸ ì‹¤íŒ¨:", response.status);
    }
%}

### ================================================================
### [Additional] ë‹¤ë¥¸ Businessë„ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°
### ================================================================

### Business ID ë³€ê²½í•˜ì—¬ í…ŒìŠ¤íŠ¸
@anotherBusinessId = 30000000-0000-0000-0000-000000000002

# @name addAnotherWishlist
POST {{baseUrl}}/api/customer/wishlist
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{anotherBusinessId}}"
}

###

# @name checkAnotherWishlist
GET {{baseUrl}}/api/customer/wishlist/check/{{anotherBusinessId}}
Authorization: Bearer {{customerToken}}

###

# @name removeAnotherWishlist
DELETE {{baseUrl}}/api/customer/wishlist/{{anotherBusinessId}}
Authorization: Bearer {{customerToken}}
