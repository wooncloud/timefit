### ì—…ì²´ ì‚­ì œ API í…ŒìŠ¤íŠ¸

### 1. OWNER ì‚¬ìš©ì íšŒì›ê°€ì…
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "delete-test@timefit.com",
  "password": "SecureP@ss123!",
  "name": "ë°•ì‚­ì œ",
  "phoneNumber": "010-3333-4444"
}
> {%
    const authHeader = response.headers.valueOf("Authorization");
    client.global.set("ownerAuthHeader", authHeader);
    console.log("OWNER íšŒì›ê°€ì… ì„±ê³µ");
%}

### 2. ì—…ì²´ ìƒì„±
POST http://localhost:8080/api/business
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "businessName": "ì‚­ì œ í…ŒìŠ¤íŠ¸ ì¹´í˜",
  "businessType": "ì¹´í˜",
  "businessNumber": "666-66-66666",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì‚­ì œë¡œ 666",
  "contactPhone": "02-6666-6666",
  "description": "ì‚­ì œë  ì˜ˆì •ì¸ ì¹´í˜ì…ë‹ˆë‹¤"
}
> {%
    if (response.body.data) {
        const businessId = response.body.data.businessId;
        client.global.set("businessId", businessId);
        console.log("ì—…ì²´ ìƒì„± ì„±ê³µ, ID:", businessId);
        console.log("ì—…ì²´ëª…:", response.body.data.businessName);
    }
%}

### 3. ì‚­ì œ ì „ ì—…ì²´ ì •ë³´ í™•ì¸
GET http://localhost:8080/api/business/{{businessId}}
Authorization: {{ownerAuthHeader}}

> {%
    console.log("=== ì‚­ì œ ì „ ì—…ì²´ ì •ë³´ ===");
    if (response.body.data) {
        console.log("ì—…ì²´ëª…:", response.body.data.businessName);
        console.log("ì—…ì²´ íƒ€ì…:", response.body.data.businessType);
        console.log("ì£¼ì†Œ:", response.body.data.address);
        console.log("ìƒì„±ì¼:", response.body.data.createdAt);
    }
%}

### 4. ì—…ì²´ ì‚­ì œ ì„±ê³µ - OWNER ê¶Œí•œ (í•µì‹¬ í…ŒìŠ¤íŠ¸)
DELETE http://localhost:8080/api/business/{{businessId}}
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "confirmDelete": true,
  "deleteReason": "ì‚¬ì—… ì •ë¦¬ë¡œ ì¸í•œ ì—…ì²´ íì—…"
}
> {%
    console.log("=== ì—…ì²´ ì‚­ì œ ê²°ê³¼ ===");
    console.log("ì‚­ì œ ì‘ë‹µ ìƒíƒœ:", response.status);

    if (response.status === 200) {
        console.log("âœ… ì—…ì²´ ì‚­ì œ ì„±ê³µ");
        if (response.body.data) {
            console.log("ì‚­ì œëœ ì—…ì²´ ID:", response.body.data.businessId);
            console.log("ì‚­ì œëœ ì—…ì²´ëª…:", response.body.data.businessName);
            console.log("ì‚­ì œ ì‹œê°„:", response.body.data.deletedAt);
            console.log("ì‚­ì œ ì‚¬ìœ :", response.body.data.deleteReason);
            console.log("ìƒíƒœ ë©”ì‹œì§€:", response.body.data.statusMessage);
        }
    } else {
        console.log("âŒ ì—…ì²´ ì‚­ì œ ì‹¤íŒ¨, ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### 5. ì‚­ì œ í›„ ì—…ì²´ ì •ë³´ ì¡°íšŒ - ì‚­ì œ í™•ì¸
GET http://localhost:8080/api/business/{{businessId}}
Authorization: {{ownerAuthHeader}}

> {%
    console.log("=== ì‚­ì œ í›„ ê°œë³„ ì¡°íšŒ ê²°ê³¼ ===");
    console.log("ì¡°íšŒ ì‘ë‹µ ìƒíƒœ:", response.status);
    console.log("ì¡°íšŒ ì‘ë‹µ ë‚´ìš©:", JSON.stringify(response.body, null, 2));

    if (response.status === 404) {
        console.log("âœ… ì‚­ì œëœ ì—…ì²´ëŠ” ì¡°íšŒë˜ì§€ ì•ŠìŒ (ì™„ì „ ì œê±°)");
    } else if (response.status === 403) {
        console.log("âœ… ì‚­ì œëœ ì—…ì²´ëŠ” ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ (ë¹„í™œì„±í™”)");
    } else if (response.body.data && response.body.data.isActive === false) {
        console.log("âœ… ì‚­ì œëœ ì—…ì²´ëŠ” ë¹„í™œì„± ìƒíƒœë¡œ í‘œì‹œë¨");
    } else if (response.status === 200) {
        console.log("âš ï¸ ì‚­ì œëœ ì—…ì²´ê°€ ì—¬ì „íˆ ì¡°íšŒë¨ - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í™•ì¸ í•„ìš”");
        console.log("ì—…ì²´ ìƒíƒœ:", response.body.data);
    }
%}

### 6. ì‚­ì œ í›„ ì—…ì²´ ëª©ë¡ ì¡°íšŒ - ëª©ë¡ì—ì„œ ì‚­ì œ í™•ì¸
GET http://localhost:8080/api/business
Authorization: {{ownerAuthHeader}}

> {%
    console.log("=== ì‚­ì œ í›„ ì—…ì²´ ëª©ë¡ ===");
    console.log("ëª©ë¡ ì¡°íšŒ ìƒíƒœ:", response.status);
    console.log("ëª©ë¡ ì¡°íšŒ ê²°ê³¼:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        const deletedBusinessId = client.global.get("businessId");
        const deletedBusiness = response.body.data.find(b => b.businessId === deletedBusinessId);

        if (!deletedBusiness) {
            console.log("âœ… ì‚­ì œëœ ì—…ì²´ê°€ ëª©ë¡ì—ì„œ ì™„ì „ ì œê±°ë¨");
        } else if (deletedBusiness.isActive === false) {
            console.log("âœ… ì‚­ì œëœ ì—…ì²´ê°€ ë¹„í™œì„± ìƒíƒœë¡œ í‘œì‹œë¨");
            console.log("ë¹„í™œì„± ì—…ì²´ ì •ë³´:", deletedBusiness);
        } else {
            console.log("âš ï¸ ì‚­ì œëœ ì—…ì²´ê°€ ì—¬ì „íˆ í™œì„± ìƒíƒœë¡œ í‘œì‹œë¨");
            console.log("ë¬¸ì œ ì—…ì²´ ì •ë³´:", deletedBusiness);
        }

        console.log("ì´ ì—…ì²´ ìˆ˜:", response.body.data.length);
        console.log("í™œì„± ì—…ì²´ ìˆ˜:", response.body.data.filter(b => b.isActive !== false).length);
        console.log("ë¹„í™œì„± ì—…ì²´ ìˆ˜:", response.body.data.filter(b => b.isActive === false).length);
    }
%}

### ========== ì´ì œ ì‚­ì œ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë“¤ í…ŒìŠ¤íŠ¸ ==========

### 7. ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ìš© ì—…ì²´ ìƒì„± (ì‹¤íŒ¨ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ìš©)
POST http://localhost:8080/api/business
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "businessName": "ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ìš© ì¹´í˜",
  "businessType": "ì¹´í˜",
  "businessNumber": "777-77-77777",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì‹¤íŒ¨ë¡œ 777",
  "contactPhone": "02-7777-7777",
  "description": "ì‹¤íŒ¨ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ìš© ì¹´í˜"
}
> {%
    if (response.body.data) {
        const testBusinessId = response.body.data.businessId;
        client.global.set("testBusinessId", testBusinessId);
        console.log("ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ìš© ì—…ì²´ ìƒì„± ì„±ê³µ, ID:", testBusinessId);
    }
%}

### 8. MEMBER ì‚¬ìš©ì ìƒì„± ë° ì´ˆëŒ€
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "member-test@timefit.com",
  "password": "SecureP@ss123!",
  "name": "ë©¤ë²„ê¶Œí•œ",
  "phoneNumber": "010-4444-5555"
}
> {%
    const memberAuthHeader = response.headers.valueOf("Authorization");
    client.global.set("memberAuthHeader", memberAuthHeader);
    console.log("MEMBER íšŒì›ê°€ì… ì„±ê³µ");
%}

### 9. MEMBER ì´ˆëŒ€
POST http://localhost:8080/api/business/{{testBusinessId}}/members/invite
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "email": "member-test@timefit.com",
  "role": "MEMBER"
}
> {%
    console.log("MEMBER ì´ˆëŒ€ ì™„ë£Œ");
%}

### 10. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - MEMBERê°€ ì—…ì²´ ì‚­ì œ ì‹œë„
DELETE http://localhost:8080/api/business/{{testBusinessId}}
Content-Type: application/json
Authorization: {{memberAuthHeader}}

{
  "confirmDelete": true,
  "deleteReason": "MEMBERê°€ ì‚­ì œ ì‹œë„"
}
> {%
    console.log("MEMBER ì‚­ì œ ì‹œë„ ì‘ë‹µ:", response.status);
    if (response.status === 403) {
        console.log("âœ… MEMBER ì‚­ì œ ê¶Œí•œ ì°¨ë‹¨ ì„±ê³µ");
        console.log("ì—ëŸ¬:", response.body.error?.code);
    } else {
        console.log("âŒ MEMBER ì‚­ì œ ê¶Œí•œ ì°¨ë‹¨ ì‹¤íŒ¨, ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### 11. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ì‚­ì œ í™•ì¸ ì—†ì´ ì‹œë„ (confirmDelete: false)
DELETE http://localhost:8080/api/business/{{testBusinessId}}
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "confirmDelete": false,
  "deleteReason": "ì‚­ì œ í™•ì¸í•˜ì§€ ì•ŠìŒ"
}
> {%
    console.log("ì‚­ì œ í™•ì¸ ì—†ëŠ” ìš”ì²­ ì‘ë‹µ:", response.status);
    if (response.status === 400) {
        console.log("âœ… ì‚­ì œ í™•ì¸ í•„ìˆ˜ ê²€ì¦ ì„±ê³µ");
        console.log("ì—ëŸ¬:", response.body.error?.code);
    } else {
        console.log("âŒ ì‚­ì œ í™•ì¸ ê²€ì¦ ì‹¤íŒ¨, ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### 12. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - í† í° ì—†ì´ ì‚­ì œ ì‹œë„
DELETE http://localhost:8080/api/business/{{testBusinessId}}
Content-Type: application/json

{
  "confirmDelete": true,
  "deleteReason": "í† í° ì—†ì´ ì‚­ì œ ì‹œë„"
}
> {%
    console.log("í† í° ì—†ëŠ” ì‚­ì œ ì‘ë‹µ:", response.status);
    if (response.status === 401) {
        console.log("âœ… í† í° ì—†ëŠ” ì‚­ì œ ì°¨ë‹¨ ì„±ê³µ");
    } else {
        console.log("âŒ í† í° ì—†ëŠ” ì‚­ì œ ì°¨ë‹¨ ì‹¤íŒ¨, ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### 13. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—…ì²´ ì‚­ì œ
DELETE http://localhost:8080/api/business/00000000-0000-0000-0000-000000000000
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "confirmDelete": true,
  "deleteReason": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—…ì²´ ì‚­ì œ ì‹œë„"
}
> {%
    console.log("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—…ì²´ ì‚­ì œ ì‘ë‹µ:", response.status);
    if (response.status === 404) {
        console.log("âœ… ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—…ì²´ ì‚­ì œ ì°¨ë‹¨ ì„±ê³µ");
        console.log("ì—ëŸ¬:", response.body.error?.code);
    } else {
        console.log("âŒ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—…ì²´ ì‚­ì œ ì°¨ë‹¨ ì‹¤íŒ¨, ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### 14. ì •ìƒ ì‚­ì œ í›„ ì¬ì‚­ì œ ì‹œë„ í…ŒìŠ¤íŠ¸
DELETE http://localhost:8080/api/business/{{testBusinessId}}
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "confirmDelete": true,
  "deleteReason": "ë‘ ë²ˆì§¸ ì—…ì²´ ì •ìƒ ì‚­ì œ"
}
> {%
    console.log("ë‘ ë²ˆì§¸ ì—…ì²´ ì •ìƒ ì‚­ì œ ì‘ë‹µ:", response.status);
    if (response.status === 200) {
        console.log("âœ… ë‘ ë²ˆì§¸ ì—…ì²´ ì‚­ì œ ì„±ê³µ");
    }
%}

### 15. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ - ì´ë¯¸ ì‚­ì œëœ ì—…ì²´ ì¬ì‚­ì œ ì‹œë„
DELETE http://localhost:8080/api/business/{{testBusinessId}}
Content-Type: application/json
Authorization: {{ownerAuthHeader}}

{
  "confirmDelete": true,
  "deleteReason": "ì´ë¯¸ ì‚­ì œëœ ì—…ì²´ ì¬ì‚­ì œ ì‹œë„"
}
> {%
    console.log("ì¬ì‚­ì œ ì‹œë„ ì‘ë‹µ:", response.status);
    if (response.status === 400 || response.status === 404) {
        console.log("âœ… ì´ë¯¸ ì‚­ì œëœ ì—…ì²´ ì¬ì‚­ì œ ì°¨ë‹¨ ì„±ê³µ");
        console.log("ì—ëŸ¬:", response.body.error?.code);
    } else {
        console.log("âŒ ì¬ì‚­ì œ ì°¨ë‹¨ ì‹¤íŒ¨, ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### 16. ìµœì¢… ìƒíƒœ í™•ì¸ - ë…¼ë¦¬ì  ì‚­ì œ ê²€ì¦
GET http://localhost:8080/api/business
Authorization: {{ownerAuthHeader}}

> {%
    console.log("=== ìµœì¢… ì—…ì²´ ëª©ë¡ (ë…¼ë¦¬ì  ì‚­ì œ ê²€ì¦) ===");
    if (response.body.data) {
        const totalBusinesses = response.body.data.length;
        const activeBusinesses = response.body.data.filter(b => b.isActive !== false);
        const inactiveBusinesses = response.body.data.filter(b => b.isActive === false);

        console.log("ì´ ì—…ì²´ ìˆ˜ (DBì— ì¡´ì¬):", totalBusinesses);
        console.log("í™œì„± ì—…ì²´ ìˆ˜ (is_active=true):", activeBusinesses.length);
        console.log("ë¹„í™œì„± ì—…ì²´ ìˆ˜ (is_active=false):", inactiveBusinesses.length);

        if (inactiveBusinesses.length >= 2) {
            console.log("âœ… ë…¼ë¦¬ì  ì‚­ì œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ - 2ê°œ ì—…ì²´ê°€ ë¹„í™œì„±í™”ë¨");
            console.log("ë¹„í™œì„±í™”ëœ ì—…ì²´ë“¤:");
            inactiveBusinesses.forEach((business, index) => {
                console.log(`  ${index + 1}. ${business.businessName} (is_active: ${business.isActive})`);
            });
        } else if (totalBusinesses === 0) {
            console.log("â„¹ï¸ ì—…ì²´ê°€ ëª©ë¡ì—ì„œ í•„í„°ë§ë¨ (ë¹„í™œì„± ì—…ì²´ëŠ” ëª©ë¡ì— í‘œì‹œí•˜ì§€ ì•ŠìŒ)");
            console.log("âœ… ë…¼ë¦¬ì  ì‚­ì œ ì •ìƒ ì‘ë™ - UIì—ì„œëŠ” ë¹„í™œì„± ì—…ì²´ ìˆ¨ê¹€");
        } else {
            console.log("âš ï¸ ë¹„í™œì„±í™” ì²˜ë¦¬ í™•ì¸ í•„ìš”");
            response.body.data.forEach((business, index) => {
                console.log(`${index + 1}. ${business.businessName} - is_active: ${business.isActive}`);
            });
        }

        console.log("âœ… ì—…ì²´ ì‚­ì œ(ë¹„í™œì„±í™”) í…ŒìŠ¤íŠ¸ ì™„ë£Œ");
        console.log("ğŸ“ ì°¸ê³ : ì‚­ì œëŠ” is_active=false ì²˜ë¦¬ë¡œ êµ¬í˜„ë¨ (ë…¼ë¦¬ì  ì‚­ì œ)");
    }
%}