### 업체 정보 수정 API 테스트

### 1. 업체 회원가입 (토큰 및 업체 생성)
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "update-test@timefit.com",
  "password": "SecureP@ss123!",
  "name": "이영희",
  "phoneNumber": "010-1111-2222",
  "businessName": "수정 테스트 미용실",
  "businessType": "미용실",
  "businessNumber": "555-55-55555",
  "address": "서울시 강남구 테헤란로 555",
  "contactPhone": "02-5555-5555",
  "description": "수정 전 설명입니다"
}

### 2. 로그인 (토큰 획득)
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "update-test@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const token = response.headers.valueOf("x-client-token");
    console.log("생성된 토큰:", token);
    client.global.set("businessToken", token);

    // 응답에서 businessId 추출
    if (response.body.data && response.body.data.businesses && response.body.data.businesses.length > 0) {
        const businessId = response.body.data.businesses[0].businessId;
        console.log("업체 ID:", businessId);
        client.global.set("businessId", businessId);
    }
%}

### 3. 수정 전 업체 정보 확인
GET http://localhost:8080/api/business/{{businessId}}
x-client-token: {{businessToken}}

> {%
    console.log("수정 전 업체 정보:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("수정 전 업체명:", response.body.data.businessName);
        console.log("수정 전 주소:", response.body.data.address);
        console.log("수정 전 설명:", response.body.data.description);
    }
%}

### 4. 업체 정보 수정 - 성공 케이스 (OWNER 권한)
PUT http://localhost:8080/api/business/{{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessName": "수정된 헤어샵",
  "businessType": "헤어샵",
  "address": "서울시 강남구 역삼동 999",
  "contactPhone": "02-9999-9999",
  "description": "수정된 설명: 고급 헤어 케어 서비스를 제공합니다",
  "logoUrl": "https://example.com/new-logo.png"
}

> {%
    console.log("업체 수정 응답 상태:", response.status);
    console.log("업체 수정 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("수정된 업체명:", response.body.data.businessName);
        console.log("수정된 주소:", response.body.data.address);
        console.log("수정된 설명:", response.body.data.description);
        console.log("수정된 로고URL:", response.body.data.logoUrl);
    }
%}

### 5. 수정 후 업체 정보 확인
GET http://localhost:8080/api/business/{{businessId}}
x-client-token: {{businessToken}}

> {%
    console.log("수정 후 업체 정보:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("확인된 업체명:", response.body.data.businessName);
        console.log("확인된 주소:", response.body.data.address);
        console.log("확인된 설명:", response.body.data.description);

        // 수정이 제대로 반영되었는지 검증
        if (response.body.data.businessName === "수정된 헤어샵") {
            console.log("✅ 업체명 수정 성공");
        }
        if (response.body.data.address === "서울시 강남구 역삼동 999") {
            console.log("✅ 주소 수정 성공");
        }
    }
%}

### 6. 부분 수정 테스트 - 업체명만 수정
PUT http://localhost:8080/api/business/{{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessName": "부분수정 테스트샵"
}

> {%
    console.log("부분 수정 응답 상태:", response.status);
    console.log("부분 수정 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("부분 수정된 업체명:", response.body.data.businessName);
    }
%}

### 7. 실패 케이스 - 토큰 없이 수정
PUT http://localhost:8080/api/business/{{businessId}}
Content-Type: application/json

{
  "businessName": "권한없는 수정 시도",
  "description": "토큰 없이 수정 시도"
}

> {%
    console.log("토큰 없는 수정 응답 상태:", response.status);
    console.log("토큰 없는 수정 응답:", JSON.stringify(response.body, null, 2));
%}

### 8. 실패 케이스 - 존재하지 않는 업체 수정
PUT http://localhost:8080/api/business/00000000-0000-0000-0000-000000000000
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessName": "존재하지 않는 업체 수정",
  "description": "존재하지 않는 업체 수정 시도"
}

> {%
    console.log("존재하지 않는 업체 수정 응답 상태:", response.status);
    console.log("존재하지 않는 업체 수정 응답:", JSON.stringify(response.body, null, 2));
%}

### 9. 실패 케이스 - 중복된 사업자번호로 수정
PUT http://localhost:8080/api/business/{{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessName": "중복 테스트",
  "businessNumber": "111-11-11111"
}

> {%
    console.log("중복 사업자번호 수정 응답 상태:", response.status);
    console.log("중복 사업자번호 수정 응답:", JSON.stringify(response.body, null, 2));
%}

### 10. 실패 케이스 - 잘못된 UUID 형식
PUT http://localhost:8080/api/business/invalid-uuid-format
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessName": "잘못된 UUID 테스트"
}

> {%
    console.log("잘못된 UUID 수정 응답 상태:", response.status);
    console.log("잘못된 UUID 수정 응답:", JSON.stringify(response.body, null, 2));
%}

### 11. 실패 케이스 - 권한 없는 업체 수정 (다른 업체 ID)
PUT http://localhost:8080/api/business/11111111-1111-1111-1111-111111111111
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessName": "권한 없는 업체 수정",
  "description": "다른 업체 수정 시도"
}

> {%
    console.log("권한 없는 업체 수정 응답 상태:", response.status);
    console.log("권한 없는 업체 수정 응답:", JSON.stringify(response.body, null, 2));
%}

### 12. 최종 업체 정보 확인
GET http://localhost:8080/api/business/{{businessId}}
x-client-token: {{businessToken}}

> {%
    console.log("최종 업체 정보:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("최종 업체명:", response.body.data.businessName);
        console.log("최종 업체 타입:", response.body.data.businessType);
        console.log("최종 주소:", response.body.data.address);
        console.log("최종 연락처:", response.body.data.contactPhone);
        console.log("최종 설명:", response.body.data.description);
        console.log("최종 로고URL:", response.body.data.logoUrl);
    }
%}