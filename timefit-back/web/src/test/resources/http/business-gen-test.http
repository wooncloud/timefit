### ================================================================
### Timefit Business ìƒì„± ì‹œ ì˜ì—…ì‹œê°„ ìë™ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
### ğŸ“ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
###    1. íšŒì›ê°€ì… (ìƒˆ ì‚¬ì¥ ê³„ì •)
###    2. ì—…ì²´ ìƒì„±
###    3. ì˜ì—…ì‹œê°„ ì¡°íšŒ â†’ ê¸°ë³¸ê°’ì´ ìë™ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
###       - ì›”~ê¸ˆ (dayOfWeek: 1~5): 09:00-18:00 (ì˜ì—…)
###       - í† ~ì¼ (dayOfWeek: 6, 0): íœ´ë¬´ (isClosed: true)
### ================================================================
###
### ğŸ”¢ dayOfWeek ë§¤í•‘:
###    0=ì¼ìš”ì¼, 1=ì›”ìš”ì¼, 2=í™”ìš”ì¼, 3=ìˆ˜ìš”ì¼, 4=ëª©ìš”ì¼, 5=ê¸ˆìš”ì¼, 6=í† ìš”ì¼
###
### ğŸ¯ í…ŒìŠ¤íŠ¸ ëª©ì :
###    BusinessCommandService.createBusiness()ì—ì„œ
###    BusinessHoursDefaultConfig.createDefaultBusinessHours()ë¥¼ í˜¸ì¶œí•˜ì—¬
###    ì˜ì—…ì‹œê°„ì´ ìë™ ì´ˆê¸°í™”ë˜ëŠ”ì§€ ê²€ì¦
###
### âœ… ê¸°ëŒ€ ê²°ê³¼:
###    - Business ìƒì„± ì§í›„ ì˜ì—…ì‹œê°„ ì¡°íšŒ ì‹œ 7ê°œ ìš”ì¼ ë°ì´í„° ì¡´ì¬
###    - ì›”~ê¸ˆ (1~5): openTime="09:00", closeTime="18:00", isClosed=false
###    - í† ~ì¼ (0, 6): openTime=null, closeTime=null, isClosed=true
### ================================================================

@baseUrl = http://localhost:8080

### ================================================================
### 1. íšŒì›ê°€ì… (ìƒˆ ì‚¬ì¥ ê³„ì •)
### ================================================================

# @name íšŒì›ê°€ì…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "test-owner-openhours@timefit.com",
  "password": "password123",
  "name": "ì˜ì—…ì‹œê°„í…ŒìŠ¤íŠ¸ì‚¬ì¥",
  "phoneNumber": "010-9999-8888"
}

> {%
    client.test("íšŒì›ê°€ì… ì„±ê³µ", function() {
        client.assert(response.status === 201, "ì‘ë‹µ ì½”ë“œê°€ 201ì´ì–´ì•¼ í•¨");
    });

    if (response.body.data && response.body.data.accessToken) {
        client.global.set("ownerToken", response.body.data.accessToken);
        console.log("âœ… [1/3] íšŒì›ê°€ì… ì„±ê³µ");
        console.log("   - ì´ë¦„:", response.body.data.name);
        console.log("   - ì´ë©”ì¼:", response.body.data.email);
    } else {
        console.error("âŒ íšŒì›ê°€ì… ì‹¤íŒ¨:", response.status, response.body);
    }
%}

###

### ================================================================
### 2. ì—…ì²´ ìƒì„±
### ================================================================

# @name ì—…ì²´ìƒì„±
POST {{baseUrl}}/api/business
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessName": "íƒ€ì„í• ìë™ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ìƒµ",
  "businessTypes": ["BD008"],
  "businessNumber": "999-88-77777",
  "address": "ì„œìš¸ì‹œ ì„œì´ˆêµ¬ í…ŒìŠ¤íŠ¸ë¡œ 123",
  "contactPhone": "02-9999-8888",
  "description": "ì˜ì—…ì‹œê°„ ìë™ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ìš© ì—…ì²´"
}

> {%
    client.test("ì—…ì²´ ìƒì„± ì„±ê³µ", function() {
        client.assert(response.status === 201, "ì‘ë‹µ ì½”ë“œê°€ 201ì´ì–´ì•¼ í•¨");
    });

    if (response.body.data && response.body.data.businessId) {
        client.global.set("businessId", response.body.data.businessId);
        console.log("âœ… [2/3] ì—…ì²´ ìƒì„± ì„±ê³µ");
        console.log("   - Business ID:", response.body.data.businessId);
        console.log("   - ì—…ì²´ëª…:", response.body.data.businessName);
        console.log("   - ê¶Œí•œ:", response.body.data.myRole);
    } else {
        console.error("âŒ ì—…ì²´ ìƒì„± ì‹¤íŒ¨:", response.status, response.body);
    }
%}

###

### ================================================================
### 3. ì˜ì—…ì‹œê°„ ì¡°íšŒ â†’ ê¸°ë³¸ê°’ ìë™ ì„¤ì • í™•ì¸
### ================================================================

# @name ì˜ì—…ì‹œê°„ì¡°íšŒ_ìë™ì´ˆê¸°í™”í™•ì¸
GET {{baseUrl}}/api/business/{{businessId}}/operating-hours
Authorization: Bearer {{ownerToken}}

> {%
    client.test("ì˜ì—…ì‹œê°„ ì¡°íšŒ ì„±ê³µ", function() {
        client.assert(response.status === 200, "ì‘ë‹µ ì½”ë“œê°€ 200ì´ì–´ì•¼ í•¨");
    });

    if (response.status === 200) {
        console.log("âœ… [3/3] ì˜ì—…ì‹œê°„ ìë™ ì´ˆê¸°í™” í™•ì¸");
        console.log("   - Business:", response.body.data.businessName);

        const schedules = response.body.data.schedules;

        // ì „ì²´ 7ê°œ ìš”ì¼ ë°ì´í„° ì¡´ì¬ í™•ì¸
        client.test("7ê°œ ìš”ì¼ ë°ì´í„° ì¡´ì¬", function() {
            client.assert(schedules.length === 7, "7ê°œ ìš”ì¼ ë°ì´í„°ê°€ ìˆì–´ì•¼ í•¨");
        });
        console.log("   âœ“ 7ê°œ ìš”ì¼ ë°ì´í„° í™•ì¸:", schedules.length + "ê°œ");

        // ì›”~ê¸ˆ í™•ì¸ (dayOfWeek: 1~5)
        const weekdays = schedules.filter(s => s.dayOfWeek >= 1 && s.dayOfWeek <= 5);
        console.log("\n   [ì›”~ê¸ˆ ì˜ì—…ì‹œê°„ í™•ì¸]");
        weekdays.forEach(day => {
            const dayNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
            console.log("   - " + dayNames[day.dayOfWeek] + "ìš”ì¼: " +
                day.openTime + "~" + day.closeTime +
                " (íœ´ë¬´: " + day.isClosed + ")");

            // ê²€ì¦: ì›”~ê¸ˆì€ 09:00-18:00, isClosed=false
            client.assert(day.openTime === "09:00", dayNames[day.dayOfWeek] + "ìš”ì¼ ì˜¤í”ˆ ì‹œê°„ì´ 09:00ì´ì–´ì•¼ í•¨");
            client.assert(day.closeTime === "18:00", dayNames[day.dayOfWeek] + "ìš”ì¼ ë§ˆê° ì‹œê°„ì´ 18:00ì´ì–´ì•¼ í•¨");
            client.assert(day.isClosed === false, dayNames[day.dayOfWeek] + "ìš”ì¼ì€ ì˜ì—…ì´ì–´ì•¼ í•¨");
        });

        // í† ~ì¼ í™•ì¸ (dayOfWeek: 0, 6)
        const weekends = schedules.filter(s => s.dayOfWeek === 0 || s.dayOfWeek === 6);
        console.log("\n   [í† ~ì¼ íœ´ë¬´ í™•ì¸]");
        weekends.forEach(day => {
            const dayNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
            console.log("   - " + dayNames[day.dayOfWeek] + "ìš”ì¼: íœ´ë¬´ (" + day.isClosed + ")");

            // ê²€ì¦: í† ~ì¼ì€ isClosed=true
            client.assert(day.isClosed === true, dayNames[day.dayOfWeek] + "ìš”ì¼ì€ íœ´ë¬´ì—¬ì•¼ í•¨");
        });

        console.log("\n   ğŸ‰ ì˜ì—…ì‹œê°„ ìë™ ì´ˆê¸°í™” ì„±ê³µ!");
        console.log("   âœ“ ì—…ì²´ ìƒì„± ì§í›„ ê¸°ë³¸ ì˜ì—…ì‹œê°„ì´ ìë™ìœ¼ë¡œ ì„¤ì •ë¨");

    } else {
        console.error("âŒ ì˜ì—…ì‹œê°„ ì¡°íšŒ ì‹¤íŒ¨:", response.status, response.body);
    }
%}

###

### ================================================================
### ğŸ‰ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸
### ================================================================
### âœ… 1. íšŒì›ê°€ì… ì„±ê³µ
### âœ… 2. ì—…ì²´ ìƒì„± ì„±ê³µ
### âœ… 3. ì˜ì—…ì‹œê°„ ìë™ ì´ˆê¸°í™” í™•ì¸
###    - 7ê°œ ìš”ì¼ ë°ì´í„° ì¡´ì¬
###    - ì›”~ê¸ˆ (dayOfWeek: 1~5): 09:00-18:00 (ì˜ì—…)
###    - í† ~ì¼ (dayOfWeek: 0, 6): íœ´ë¬´
### ================================================================
