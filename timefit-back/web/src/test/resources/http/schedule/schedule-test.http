### 슬롯 기반 예약 시스템 완전 테스트

### 1. 고객 회원가입
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "slot-customer@timefit.com",
  "password": "SecureP@ss123!",
  "name": "슬롯테스트고객",
  "phoneNumber": "010-1111-2222",
  "businessName": "고객 개인업체",
  "businessType": "개인",
  "businessNumber": "111-11-11111",
  "address": "서울시 강남구 고객로 111",
  "contactPhone": "02-1111-1111",
  "description": "슬롯 테스트용 고객 개인업체"
}

### 2. 고객 로그인
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "slot-customer@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const token = response.headers.valueOf("x-client-token");
    console.log("고객 토큰:", token);
    client.global.set("customerToken", token);
%}

### 3. 업체 회원가입
POST http://localhost:8080/api/auth/signup
Content-Type: application/json

{
  "email": "slot-business@timefit.com",
  "password": "SecureP@ss123!",
  "name": "슬롯테스트업체",
  "phoneNumber": "010-2222-3333",
  "businessName": "슬롯 테스트 헬스장",
  "businessType": "헬스장",
  "businessNumber": "222-22-22222",
  "address": "서울시 강남구 헬스로 222",
  "contactPhone": "02-2222-2222",
  "description": "슬롯 테스트용 헬스장"
}

### 4. 업체 로그인
POST http://localhost:8080/api/auth/signin
Content-Type: application/json

{
  "email": "slot-business@timefit.com",
  "password": "SecureP@ss123!"
}
> {%
    const businessToken = response.headers.valueOf("x-client-token");
    console.log("업체 토큰:", businessToken);
    client.global.set("businessToken", businessToken);

    if (response.body.data && response.body.data.businesses && response.body.data.businesses.length > 0) {
        const businessId = response.body.data.businesses[0].businessId;
        console.log("업체 ID:", businessId);
        client.global.set("businessId", businessId);
    }
%}

### 5. 업체 영업시간 설정
PUT http://localhost:8080/api/schedule/operating-hours?businessId={{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "businessHours": [
    {
      "dayOfWeek": 1,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 2,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 3,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 4,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 5,
      "openTime": "09:00",
      "closeTime": "20:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 6,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false
    },
    {
      "dayOfWeek": 0,
      "openTime": null,
      "closeTime": null,
      "isClosed": true
    }
  ]
}

> {%
    console.log("영업시간 설정 응답:", JSON.stringify(response.body, null, 2));
    if (response.body.data) {
        console.log("✅ 영업시간 설정 완료 - " + response.body.data.businessName);
        console.log("설정된 영업시간 수:", response.body.data.businessHours.length);
    }
%}

### 6. 첫 번째 예약 슬롯 생성 (7월 30일 14:00-15:00)
POST http://localhost:8080/api/schedule/available-slots?businessId={{businessId}}
Content-Type: application/json
x-client-token: {{businessToken}}

{
  "slotDate": "2025-07-30",
  "startTime": "14:00",
  "endTime": "15:00",
  "capacity": 1
}

> {%
    console.log("첫 번째 슬롯 생성 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("✅ 첫 번째 슬롯 생성 성공");
        console.log("슬롯 ID:", response.body.data.slotId);
        console.log("슬롯 날짜:", response.body.data.slotDate);
        console.log("슬롯 시간:", response.body.data.startTime + " - " + response.body.data.endTime);
        console.log("용량:", response.body.data.capacity);
        client.global.set("firstSlotId", response.body.data.slotId);
    } else {
        console.log("❌ 첫 번째 슬롯 생성 실패");
    }
%}

### 7. 첫 번째 슬롯으로 예약 신청
POST http://localhost:8080/api/reservations
Content-Type: application/json
x-client-token: {{customerToken}}

{
  "businessId": "{{businessId}}",
  "customerId": null,
  "availableSlotId": "{{firstSlotId}}",
  "durationMinutes": 60,
  "selectedOptions": [
    {
      "optionId": "11111111-1111-1111-1111-111111111111",
      "optionName": "개인 트레이닝",
      "price": 50000
    }
  ],
  "notes": "슬롯 기반 첫 번째 예약입니다.",
  "customerName": "슬롯테스트고객",
  "customerPhone": "010-1111-2222"
}

> {%
    console.log("첫 번째 예약 신청 응답:", JSON.stringify(response.body, null, 2));

    if (response.body.data) {
        console.log("✅ 첫 번째 예약 신청 성공");
        console.log("예약 ID:", response.body.data.reservationId);
        console.log("예약 번호:", response.body.data.reservationNumber);
        console.log("예약 일시:", response.body.data.reservationDetails.date + " " + response.body.data.reservationDetails.time);
        console.log("총 가격:", response.body.data.reservationDetails.totalPrice + "원");
        client.global.set("firstReservationId", response.body.data.reservationId);
    } else {
        console.log("❌ 첫 번째 예약 신청 실패");
    }
%}