### ================================================================
### Timefit Phase 2 í…ŒìŠ¤íŠ¸ - ì™„ì „ Pure í™˜ê²½ (ë”ë¯¸ ë°ì´í„° ì—†ìŒ)
### ================================================================
###
### í…ŒìŠ¤íŠ¸ ìˆœì„œ:
### [Setup 1] ì‚¬ì¥ íšŒì›ê°€ì… + ë¡œê·¸ì¸
### [Setup 2] ì—…ì²´ ìƒì„±
### [Setup 3] ì˜ì—…ì‹œê°„ ì„¤ì •
### [Setup 4] ì¹´í…Œê³ ë¦¬ ìƒì„±
### [Setup 5] í—¤ì–´ì»· ë©”ë‰´ ìƒì„± (60ë¶„)
### [Setup 6] íŒŒë§ˆ ë©”ë‰´ ìƒì„± (120ë¶„)
### [Phase 1] BookingSlot ì¡°íšŒ - ê°™ì€ ì‹œê°„ëŒ€ 2ê°œ ë©”ë‰´ ìŠ¬ë¡¯ ì¡´ì¬ í™•ì¸
### [Setup 7] ê³ ê° íšŒì›ê°€ì… + ë¡œê·¸ì¸
### [Phase 2] ì˜ˆì•½ ì‹œê°„ëŒ€ ì¶©ëŒ í…ŒìŠ¤íŠ¸
###   - Test 1: íŒŒë§ˆ 09:00-11:00 ì˜ˆì•½ (ì„±ê³µ)
###   - Test 2: í—¤ì–´ì»· 09:00-10:00 ì˜ˆì•½ (ì‹¤íŒ¨ - ì¶©ëŒ)
###   - Test 3: í—¤ì–´ì»· 10:00-11:00 ì˜ˆì•½ (ì‹¤íŒ¨ - ì¶©ëŒ)
###   - Test 4: í—¤ì–´ì»· 11:00-12:00 ì˜ˆì•½ (ì„±ê³µ)
###
### ================================================================

@baseUrl = http://localhost:8080

### ================================================================
### [Setup 1-1] ì‚¬ì¥ íšŒì›ê°€ì…
### ================================================================

# @name ì‚¬ì¥íšŒì›ê°€ì…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "owner@test.com",
  "password": "test1234!",
  "name": "ê¹€ì‚¬ì¥",
  "phoneNumber": "010-1234-5678",
  "role": "BUSINESS"
}

> {%
    console.log("\n[Setup 1-1] ì‚¬ì¥ íšŒì›ê°€ì…");
    console.log("   - Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        console.log("âœ… ì‚¬ì¥ íšŒì›ê°€ì… ì„±ê³µ");
        console.log("   - Email: owner@test.com");
        console.log("   - Role: BUSINESS");
    } else {
        console.error("âŒ ì‚¬ì¥ íšŒì›ê°€ì… ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 1-2] ì‚¬ì¥ ë¡œê·¸ì¸
### ================================================================

# @name ì‚¬ì¥ë¡œê·¸ì¸
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "owner@test.com",
  "password": "test1234!"
}

> {%
    console.log("\n[Setup 1-2] ì‚¬ì¥ ë¡œê·¸ì¸");
    console.log("   - Status:", response.status);

    if (response.status === 200 && response.body.data && response.body.data.accessToken) {
        client.global.set("ownerToken", response.body.data.accessToken);
        console.log("âœ… ì‚¬ì¥ ë¡œê·¸ì¸ ì„±ê³µ");
        console.log("   - Token ì €ì¥ ì™„ë£Œ");
    } else {
        console.error("âŒ ì‚¬ì¥ ë¡œê·¸ì¸ ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 2] ì—…ì²´ ìƒì„±
### ================================================================

# @name ì—…ì²´ìƒì„±
POST {{baseUrl}}/api/business
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessName": "ì¢‹ì€í—¤ì–´ ê°•ë‚¨ì ",
  "businessTypes": ["BD008"],
  "businessNumber": "123-45-67890",
  "ownerName": "ê¹€ì‚¬ì¥",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
  "contactPhone": "02-1234-5678",
  "description": "ê³ ê° ë§Œì¡±ì„ ìµœìš°ì„ ìœ¼ë¡œ í•˜ëŠ” í—¤ì–´ìƒµì…ë‹ˆë‹¤."
}

> {%
    console.log("\n[Setup 2] ì—…ì²´ ìƒì„±");
    console.log("   - Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        if (response.body.data && response.body.data.businessId) {
            client.global.set("businessId", response.body.data.businessId);
            console.log("âœ… ì—…ì²´ ìƒì„± ì„±ê³µ");
            console.log("   - Business ID:", response.body.data.businessId);
            console.log("   - ì—…ì²´ëª…:", response.body.data.businessName);
        } else {
            console.error("âŒ ì‘ë‹µ êµ¬ì¡° ì˜¤ë¥˜:", response.body);
        }
    } else {
        console.error("âŒ ì—…ì²´ ìƒì„± ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 3] ì˜ì—…ì‹œê°„ ì„¤ì • (ì›”~ê¸ˆ 09:00-18:00, í† ~ì¼ íœ´ë¬´)
### ================================================================

# @name ì˜ì—…ì‹œê°„ì„¤ì •
PUT {{baseUrl}}/api/business/{{businessId}}/operating-hours
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "schedules": [
    {
      "dayOfWeek": 1,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "12:00"},
        {"startTime": "13:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 2,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "12:00"},
        {"startTime": "13:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 3,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "12:00"},
        {"startTime": "13:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 4,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "12:00"},
        {"startTime": "13:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 5,
      "openTime": "09:00",
      "closeTime": "18:00",
      "isClosed": false,
      "bookingTimeRanges": [
        {"startTime": "09:00", "endTime": "12:00"},
        {"startTime": "13:00", "endTime": "18:00"}
      ]
    },
    {
      "dayOfWeek": 6,
      "isClosed": true,
      "bookingTimeRanges": []
    },
    {
      "dayOfWeek": 0,
      "isClosed": true,
      "bookingTimeRanges": []
    }
  ]
}

> {%
    console.log("\n[Setup 3] ì˜ì—…ì‹œê°„ ì„¤ì •");
    console.log("   - Status:", response.status);

    if (response.status === 200) {
        console.log("âœ… ì˜ì—…ì‹œê°„ ì„¤ì • ì„±ê³µ");
        console.log("   - ì›”~ê¸ˆ: 09:00-18:00");
        console.log("   - í† ~ì¼: íœ´ë¬´");
    } else {
        console.error("âŒ ì˜ì—…ì‹œê°„ ì„¤ì • ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 4] ì¹´í…Œê³ ë¦¬ ìƒì„± (Hair)
### ================================================================

# @name ì¹´í…Œê³ ë¦¬ìƒì„±
POST {{baseUrl}}/api/business/{{businessId}}/category
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessType": "BD008",
  "categoryName": "Hair"
}

> {%
    console.log("\n[Setup 4] ì¹´í…Œê³ ë¦¬ ìƒì„±");
    console.log("   - Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        if (response.body.data && response.body.data.categoryId) {
            client.global.set("businessCategoryId", response.body.data.categoryId);
            console.log("âœ… ì¹´í…Œê³ ë¦¬ ìƒì„± ì„±ê³µ");
            console.log("   - Category ID:", response.body.data.categoryId);
            console.log("   - Type: BD008 (BEAUTY)");
            console.log("   - Name: Hair");
        } else {
            console.error("âŒ ì‘ë‹µ êµ¬ì¡° ì˜¤ë¥˜:", response.body);
        }
    } else {
        console.error("âŒ ì¹´í…Œê³ ë¦¬ ìƒì„± ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
        console.error("\nâš ï¸  ì¹´í…Œê³ ë¦¬ ìƒì„± ì‹¤íŒ¨ ì‹œ ì´í›„ ë©”ë‰´ ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤!");
    }
%}

### ================================================================
### [Setup 5] í—¤ì–´ì»· ë©”ë‰´ ìƒì„± (60ë¶„)
### ================================================================

# @name í—¤ì–´ì»·ë©”ë‰´ìƒì„±
POST {{baseUrl}}/api/business/{{businessId}}/menu
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessType": "BD008",
  "categoryName": "Hair",
  "serviceName": "í—¤ì–´ì»·",
  "description": "ê¸°ë³¸ ì»¤íŠ¸ ì„œë¹„ìŠ¤",
  "price": 30000,
  "durationMinutes": 60,
  "orderType": "RESERVATION_BASED",
  "autoGenerateSlots": true,
  "slotSettings": {
    "startDate": "2026-01-16",
    "endDate": "2026-01-31",
    "slotIntervalMinutes": 60,
    "specificTimeRanges": [
      {"startTime": "09:00", "endTime": "12:00"},
      {"startTime": "13:00", "endTime": "18:00"}
    ]
  }
}

> {%
    console.log("\n[Setup 5] í—¤ì–´ì»· ë©”ë‰´ ìƒì„±");
    console.log("   - Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        if (response.body.data && response.body.data.menuId) {
            client.global.set("haircutMenuId", response.body.data.menuId);
            console.log("âœ… í—¤ì–´ì»· ë©”ë‰´ ìƒì„± ì„±ê³µ");
            console.log("   - Menu ID:", response.body.data.menuId);
            console.log("   - ì†Œìš”ì‹œê°„: 60ë¶„");
            console.log("   - ìŠ¬ë¡¯ ê°„ê²©: 60ë¶„");
            console.log("   - ê¸°ê°„: 2026-01-16 ~ 2026-01-31");
            console.log("\nâš ï¸  ì„œë²„ ë¡œê·¸ í™•ì¸:");
            console.log("   â†’ 'BookingSlot ìƒì„± ì™„ë£Œ: ìƒì„± ê°œìˆ˜=XXX' ë¡œê·¸ í™•ì¸");
        } else {
            console.error("âŒ ì‘ë‹µ êµ¬ì¡° ì˜¤ë¥˜:", response.body);
        }
    } else {
        console.error("âŒ í—¤ì–´ì»· ë©”ë‰´ ìƒì„± ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 6] íŒŒë§ˆ ë©”ë‰´ ìƒì„± (120ë¶„)
### ================================================================

# @name íŒŒë§ˆë©”ë‰´ìƒì„±
POST {{baseUrl}}/api/business/{{businessId}}/menu
Content-Type: application/json
Authorization: Bearer {{ownerToken}}

{
  "businessType": "BD008",
  "categoryName": "Hair",
  "serviceName": "íŒŒë§ˆ",
  "description": "ë””ì§€í„¸ íŒŒë§ˆ ì„œë¹„ìŠ¤",
  "price": 80000,
  "durationMinutes": 120,
  "orderType": "RESERVATION_BASED",
  "autoGenerateSlots": true,
  "slotSettings": {
    "startDate": "2026-01-16",
    "endDate": "2026-01-31",
    "slotIntervalMinutes": 120,
    "specificTimeRanges": [
      {"startTime": "09:00", "endTime": "12:00"},
      {"startTime": "13:00", "endTime": "18:00"}
    ]
  }
}

> {%
    console.log("\n[Setup 6] íŒŒë§ˆ ë©”ë‰´ ìƒì„±");
    console.log("   - Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        if (response.body.data && response.body.data.menuId) {
            client.global.set("permaMenuId", response.body.data.menuId);
            console.log("âœ… íŒŒë§ˆ ë©”ë‰´ ìƒì„± ì„±ê³µ");
            console.log("   - Menu ID:", response.body.data.menuId);
            console.log("   - ì†Œìš”ì‹œê°„: 120ë¶„");
            console.log("   - ìŠ¬ë¡¯ ê°„ê²©: 120ë¶„");
            console.log("   - ê¸°ê°„: 2026-01-16 ~ 2026-01-31");
        } else {
            console.error("âŒ ì‘ë‹µ êµ¬ì¡° ì˜¤ë¥˜:", response.body);
        }
    } else {
        console.error("âŒ íŒŒë§ˆ ë©”ë‰´ ìƒì„± ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Phase 1] BookingSlot ì¡°íšŒ - 2026-01-16 (ëª©ìš”ì¼)
### ================================================================

# @name ìŠ¬ë¡¯ì¡°íšŒ_2026-01-16
GET {{baseUrl}}/api/business/{{businessId}}/booking-slot?date=2026-01-16

> {%
    console.log("\n========================================");
    console.log("[Phase 1] BookingSlot ì¡°íšŒ - 2026-01-16");
    console.log("========================================");
    console.log("Status:", response.status);

    if (response.status === 200) {
        const slots = response.body.data.slots || [];

        console.log("ì „ì²´ ìŠ¬ë¡¯ ê°œìˆ˜:", slots.length);

        if (slots.length === 0) {
            console.error("\nâŒ ìŠ¬ë¡¯ì´ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤!");
            console.error("   - ë©”ë‰´ ìƒì„± ì‹¤íŒ¨");
            console.error("   - BookingSlot ìë™ ìƒì„± ì‹¤íŒ¨");
            console.error("   - ì„œë²„ ë¡œê·¸ í™•ì¸ í•„ìš”");
        }

        // 09:00 ìŠ¬ë¡¯ í•„í„°ë§
        const slots_09_00 = slots.filter(s => s.startTime === "09:00:00");

        console.log("\n09:00 ìŠ¬ë¡¯ ê°œìˆ˜:", slots_09_00.length);

        // ê° ìŠ¬ë¡¯ ìƒì„¸ ì •ë³´ ì¶œë ¥
        slots_09_00.forEach((slot, idx) => {
            console.log(`\n  [ìŠ¬ë¡¯ ${idx + 1}]`);
            console.log(`  - menuName: "${slot.menuName}"`);
            console.log(`  - slotId: ${slot.slotId}`);
            console.log(`  - startTime: ${slot.startTime}`);
            console.log(`  - endTime: ${slot.endTime}`);
        });

        if (slots_09_00.length >= 2) {
            console.log("\nâœ… Phase 1 ì„±ê³µ: ê°™ì€ ì‹œê°„ëŒ€ì— ì—¬ëŸ¬ ë©”ë‰´ ìŠ¬ë¡¯ ê³µì¡´!");
        } else {
            console.error("\nâŒ Phase 1 ì‹¤íŒ¨: 09:00 ìŠ¬ë¡¯ì´ 2ê°œ ë¯¸ë§Œ");
        }

        // í—¤ì–´ì»· 09:00 ìŠ¬ë¡¯ ID ì €ì¥
        const haircutSlot = slots_09_00.find(s => s.menuName === "í—¤ì–´ì»·");
        if (haircutSlot && haircutSlot.slotId) {
            client.global.set("haircutSlot_09_00", haircutSlot.slotId);
            console.log("\nâœ… í—¤ì–´ì»· 09:00 ìŠ¬ë¡¯ ì €ì¥:", haircutSlot.slotId);
        } else {
            console.error("\nâŒ í—¤ì–´ì»· ìŠ¬ë¡¯ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
            console.error("   - ê°€ëŠ¥í•œ menuName:", slots_09_00.map(s => `"${s.menuName}"`).join(", "));
        }

        // íŒŒë§ˆ 09:00 ìŠ¬ë¡¯ ID ì €ì¥
        const permaSlot = slots_09_00.find(s => s.menuName === "íŒŒë§ˆ");
        if (permaSlot && permaSlot.slotId) {
            client.global.set("permaSlot_09_00", permaSlot.slotId);
            console.log("âœ… íŒŒë§ˆ 09:00 ìŠ¬ë¡¯ ì €ì¥:", permaSlot.slotId);

            // ì €ì¥ í™•ì¸
            const savedValue = client.global.get("permaSlot_09_00");
            console.log("   â†’ ì €ì¥ëœ ê°’ í™•ì¸:", savedValue);
        } else {
            console.error("âŒ íŒŒë§ˆ ìŠ¬ë¡¯ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
            console.error("   - ê°€ëŠ¥í•œ menuName:", slots_09_00.map(s => `"${s.menuName}"`).join(", "));
        }

        // í—¤ì–´ì»· 10:00, 11:00 ìŠ¬ë¡¯ë„ ì €ì¥
        const slots_10_00 = slots.filter(s => s.startTime === "10:00:00" && s.menuName === "í—¤ì–´ì»·");
        if (slots_10_00.length > 0 && slots_10_00[0].slotId) {
            client.global.set("haircutSlot_10_00", slots_10_00[0].slotId);
            console.log("âœ… í—¤ì–´ì»· 10:00 ìŠ¬ë¡¯ ì €ì¥:", slots_10_00[0].slotId);
        }

        const slots_11_00 = slots.filter(s => s.startTime === "11:00:00" && s.menuName === "í—¤ì–´ì»·");
        if (slots_11_00.length > 0 && slots_11_00[0].slotId) {
            client.global.set("haircutSlot_11_00", slots_11_00[0].slotId);
            console.log("âœ… í—¤ì–´ì»· 11:00 ìŠ¬ë¡¯ ì €ì¥:", slots_11_00[0].slotId);
        }

        // ìµœì¢… ë³€ìˆ˜ ì €ì¥ ìƒíƒœ í™•ì¸
        console.log("\n=== ë³€ìˆ˜ ì €ì¥ ìƒíƒœ í™•ì¸ ===");
        console.log("permaSlot_09_00:", client.global.get("permaSlot_09_00") || "âŒ ë¯¸ì €ì¥");
        console.log("haircutSlot_09_00:", client.global.get("haircutSlot_09_00") || "âŒ ë¯¸ì €ì¥");
        console.log("haircutSlot_10_00:", client.global.get("haircutSlot_10_00") || "âŒ ë¯¸ì €ì¥");
        console.log("haircutSlot_11_00:", client.global.get("haircutSlot_11_00") || "âŒ ë¯¸ì €ì¥");

    } else {
        console.error("\nâŒ ìŠ¬ë¡¯ ì¡°íšŒ ì‹¤íŒ¨:", response.status);
        console.error("   - ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 7-1] ê³ ê° íšŒì›ê°€ì…
### ================================================================

# @name ê³ ê°íšŒì›ê°€ì…
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "customer@test.com",
  "password": "test1234!",
  "name": "ê¹€ê³ ê°",
  "phoneNumber": "010-8765-4321",
  "role": "CUSTOMER"
}

> {%
    console.log("\n[Setup 7-1] ê³ ê° íšŒì›ê°€ì…");
    console.log("   - Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        console.log("âœ… ê³ ê° íšŒì›ê°€ì… ì„±ê³µ");
        console.log("   - Email: customer@test.com");
        console.log("   - Role: CUSTOMER");
    } else {
        console.error("âŒ ê³ ê° íšŒì›ê°€ì… ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Setup 7-2] ê³ ê° ë¡œê·¸ì¸
### ================================================================

# @name ê³ ê°ë¡œê·¸ì¸
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "customer@test.com",
  "password": "test1234!"
}

> {%
    console.log("\n[Setup 7-2] ê³ ê° ë¡œê·¸ì¸");
    console.log("   - Status:", response.status);

    if (response.status === 200 && response.body.data && response.body.data.accessToken) {
        client.global.set("customerToken", response.body.data.accessToken);
        console.log("âœ… ê³ ê° ë¡œê·¸ì¸ ì„±ê³µ");
        console.log("   - Token ì €ì¥ ì™„ë£Œ");
    } else {
        console.error("âŒ ê³ ê° ë¡œê·¸ì¸ ì‹¤íŒ¨");
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Phase 2 Test 1/4] íŒŒë§ˆ 09:00-11:00 ì˜ˆì•½ ìƒì„± (ì„±ê³µ ì˜ˆìƒ)
### ================================================================

# @name íŒŒë§ˆì˜ˆì•½_09_00
POST {{baseUrl}}/api/reservation
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{businessId}}",
  "menuId": "{{permaMenuId}}",
  "bookingSlotId": "{{permaSlot_09_00}}",
  "durationMinutes": 120,
  "totalPrice": 80000,
  "customerName": "ê¹€ê³ ê°",
  "customerPhone": "01087654321",
  "notes": "íŒŒë§ˆ ì˜ˆì•½"
}

> {%
    console.log("\n========================================");
    console.log("[Phase 2-1/4] íŒŒë§ˆ 09:00-11:00 ì˜ˆì•½");
    console.log("========================================");
    console.log("Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        client.global.set("permaReservationId", response.body.data.reservationId);
        console.log("\nâœ… íŒŒë§ˆ ì˜ˆì•½ ì„±ê³µ");
        console.log("   - Reservation ID:", response.body.data.reservationId);
        console.log("   - ì‹œê°„ëŒ€: 09:00-11:00 (120ë¶„)");
    } else {
        console.error("\nâŒ íŒŒë§ˆ ì˜ˆì•½ ì‹¤íŒ¨");
        console.error("   - Status:", response.status);
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Phase 2 Test 2/4] í—¤ì–´ì»· 09:00-10:00 ì˜ˆì•½ ìƒì„± (ì¶©ëŒ - ì‹¤íŒ¨ ì˜ˆìƒ)
### ================================================================

# @name í—¤ì–´ì»·ì˜ˆì•½_09_00_ì¶©ëŒ
POST {{baseUrl}}/api/reservation
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{businessId}}",
  "menuId": "{{haircutMenuId}}",
  "bookingSlotId": "{{haircutSlot_09_00}}",
  "durationMinutes": 60,
  "totalPrice": 30000,
  "customerName": "ê¹€ê³ ê°",
  "customerPhone": "01087654321",
  "notes": "í—¤ì–´ì»· ì˜ˆì•½ (09:00)"
}

> {%
    console.log("\n========================================");
    console.log("[Phase 2-2/4] í—¤ì–´ì»· 09:00-10:00 ì˜ˆì•½ (ì¶©ëŒ)");
    console.log("========================================");
    console.log("Status:", response.status);

    if (response.status === 400 || response.status === 409) {
        console.log("\nâœ… ì¶©ëŒ ê°ì§€ ì„±ê³µ!");
        console.log("   - íŒŒë§ˆ ì˜ˆì•½(09:00-11:00)ê³¼ ì¶©ëŒ");
        console.log("   - ì—ëŸ¬:", response.body.error || response.body.message);
    } else if (response.status === 200 || response.status === 201) {
        console.error("\nâŒ Phase 2 ì‹¤íŒ¨: ì¶©ëŒì„ ê°ì§€í•˜ì§€ ëª»í•¨!");
        console.error("   - í—¤ì–´ì»· ì˜ˆì•½ì´ ì„±ê³µí–ˆì§€ë§Œ, ì¶©ëŒí–ˆì–´ì•¼ í•¨");
    } else {
        console.error("\nâŒ ì˜ˆìƒì¹˜ ëª»í•œ ì‘ë‹µ");
        console.error("   - Status:", response.status);
        console.error("   - ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Phase 2 Test 3/4] í—¤ì–´ì»· 10:00-11:00 ì˜ˆì•½ ìƒì„± (ì¶©ëŒ - ì‹¤íŒ¨ ì˜ˆìƒ)
### ================================================================

# @name í—¤ì–´ì»·ì˜ˆì•½_10_00_ì¶©ëŒ
POST {{baseUrl}}/api/reservation
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{businessId}}",
  "menuId": "{{haircutMenuId}}",
  "bookingSlotId": "{{haircutSlot_10_00}}",
  "durationMinutes": 60,
  "totalPrice": 30000,
  "customerName": "ê¹€ê³ ê°",
  "customerPhone": "01087654321",
  "notes": "í—¤ì–´ì»· ì˜ˆì•½ (10:00)"
}

> {%
    console.log("\n========================================");
    console.log("[Phase 2-3/4] í—¤ì–´ì»· 10:00-11:00 ì˜ˆì•½ (ì¶©ëŒ)");
    console.log("========================================");
    console.log("Status:", response.status);

    if (response.status === 400 || response.status === 409) {
        console.log("\nâœ… ì¶©ëŒ ê°ì§€ ì„±ê³µ!");
        console.log("   - íŒŒë§ˆ ì˜ˆì•½(09:00-11:00)ê³¼ ì¶©ëŒ");
        console.log("   - ì—ëŸ¬:", response.body.error || response.body.message);
    } else if (response.status === 200 || response.status === 201) {
        console.error("\nâŒ Phase 2 ì‹¤íŒ¨: ì¶©ëŒì„ ê°ì§€í•˜ì§€ ëª»í•¨!");
    } else {
        console.error("\nâŒ ì˜ˆìƒì¹˜ ëª»í•œ ì‘ë‹µ");
        console.error("   - ì‘ë‹µ:", JSON.stringify(response.body, null, 2));
    }
%}

### ================================================================
### [Phase 2 Test 4/4] í—¤ì–´ì»· 11:00-12:00 ì˜ˆì•½ ìƒì„± (ì„±ê³µ ì˜ˆìƒ)
### ================================================================

# @name í—¤ì–´ì»·ì˜ˆì•½_11_00_ì„±ê³µ
POST {{baseUrl}}/api/reservation
Content-Type: application/json
Authorization: Bearer {{customerToken}}

{
  "businessId": "{{businessId}}",
  "menuId": "{{haircutMenuId}}",
  "bookingSlotId": "{{haircutSlot_11_00}}",
  "durationMinutes": 60,
  "totalPrice": 30000,
  "customerName": "ê¹€ê³ ê°",
  "customerPhone": "01087654321",
  "notes": "í—¤ì–´ì»· ì˜ˆì•½ (11:00)"
}

> {%
    console.log("\n========================================");
    console.log("[Phase 2-4/4] í—¤ì–´ì»· 11:00-12:00 ì˜ˆì•½");
    console.log("========================================");
    console.log("Status:", response.status);

    if (response.status === 200 || response.status === 201) {
        console.log("\nâœ… í—¤ì–´ì»· ì˜ˆì•½ ì„±ê³µ");
        console.log("   - Reservation ID:", response.body.data.reservationId);
        console.log("   - ì‹œê°„ëŒ€: 11:00-12:00 (60ë¶„)");
        console.log("\n========================================");
        console.log("ğŸ‰ Phase 2 í…ŒìŠ¤íŠ¸ ì™„ë£Œ!");
        console.log("========================================");
        console.log("âœ… Test 1: íŒŒë§ˆ 09:00 ì˜ˆì•½ ì„±ê³µ");
        console.log("âœ… Test 2: í—¤ì–´ì»· 09:00 ì¶©ëŒ ê°ì§€");
        console.log("âœ… Test 3: í—¤ì–´ì»· 10:00 ì¶©ëŒ ê°ì§€");
        console.log("âœ… Test 4: í—¤ì–´ì»· 11:00 ì˜ˆì•½ ì„±ê³µ");
    } else {
        console.error("\nâŒ í—¤ì–´ì»· ì˜ˆì•½ ì‹¤íŒ¨");
        console.error("   - Status:", response.status);
        console.error("   - ì—ëŸ¬:", JSON.stringify(response.body, null, 2));
    }
%}
