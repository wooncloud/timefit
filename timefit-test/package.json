{
  "name": "timefit-performance-tests",
  "version": "1.0.0",
  "scripts": {
    "// ========== Level 1: no-join ==========": "",
    "test:pattern:l1:smoke": "k6 run --out dashboard=report=results/level1-smoke.html scripts/01-patterns/level-1-no-join/business_smoke.js",
    "test:pattern:l1:load": "k6 run --out dashboard=report=results/level1-load.html scripts/01-patterns/level-1-no-join/business_load.js",
    "test:pattern:l1:stress": "k6 run --out dashboard=report=results/level1-stress.html scripts/01-patterns/level-1-no-join/business_stress.js",
    "test:pattern:l1:soak": "k6 run --out dashboard=report=results/level1-soak.html scripts/01-patterns/level-1-no-join/business_soak.js",
    "test:pattern:l1:all": "npx npm-run-all -c -s test:pattern:l1:smoke test:pattern:l1:load test:pattern:l1:stress test:pattern:l1:soak",

    "// ========== Level 2: single-join ==========": "",
    "test:pattern:l2:load": "k6 run --out dashboard=report=results/level2-load.html scripts/01-patterns/level-2-single-join/menus_load.js",
    "test:pattern:l2:stress": "k6 run --out dashboard=report=results/level2-stress.html scripts/01-patterns/level-2-single-join/menus_stress.js",
    "test:pattern:l2:spike": "k6 run --out dashboard=report=results/level2-spike.html scripts/01-patterns/level-2-single-join/menus_spike.js",
    "test:pattern:l2:all": "npx npm-run-all -c -s test:pattern:l2:load test:pattern:l2:stress test:pattern:l2:spike",

    "// ========== Level 3: multiple-join ==========": "",
    "test:pattern:l3:load": "k6 run --out dashboard=report=results/level3-load.html scripts/01-patterns/level-3-multiple-join/reservations_load.js",
    "test:pattern:l3:stress": "k6 run --out dashboard=report=results/level3-stress.html scripts/01-patterns/level-3-multiple-join/reservations_stress.js",
    "test:pattern:l3:all": "npx npm-run-all -c -s test:pattern:l3:load test:pattern:l3:stress",


    "// ========== Phase 2: Booking ==========": "",
    "test:booking:slot-generation": "k6 run --out dashboard=report=results/booking-slot-generation.html scripts/02-booking/slot-generation.js",
    "test:booking:concurrent": "k6 run --out dashboard=report=results/booking-concurrent.html scripts/02-booking/concurrent-booking.js",
    "test:booking:query": "k6 run --out dashboard=report=results/booking-query.html scripts/02-booking/query-performance.js",
    "test:booking:all": "npx npm-run-all -c -s test:booking:slot-generation test:booking:concurrent test:booking:query",


    "// ========== 전체 실행 (하나 실패 시 중단) ==========": "",
    "test:all:phase1": "npm run test:pattern:l1:smoke && npm run test:pattern:l1:load && npm run test:pattern:l1:stress && npm run test:pattern:l1:soak && npm run test:pattern:l2:load && npm run test:pattern:l2:stress && npm run test:pattern:l2:spike && npm run test:pattern:l3:load && npm run test:pattern:l3:stress",
    "test:all:phase2": "npm run test:booking:slot-generation && npm run test:booking:concurrent && npm run test:booking:query",
    "test:all": "npm run test:all:phase1 && npm run test:all:phase2",
    "// ========== 전체 실행 (실패해도 계속) ==========": "",
    "test:all:phase1:continue": "npm run test:pattern:l1:smoke; npm run test:pattern:l1:load; npm run test:pattern:l1:stress; npm run test:pattern:l1:soak; npm run test:pattern:l2:load; npm run test:pattern:l2:stress; npm run test:pattern:l2:spike; npm run test:pattern:l3:load; npm run test:pattern:l3:stress",
    "test:all:phase2:continue": "npm run test:booking:slot-generation; npm run test:booking:concurrent; npm run test:booking:query",
    "test:all:continue": "npm run test:all:phase1:continue; npm run test:all:phase2:continue",

    "// ========== Scouter APM (Windows) ==========": "",
    "scouter:collector:win": "cd scouter/server && start cmd /k startup.bat",
    "scouter:webapp:win": "cd scouter/webapp && start cmd /k startup.bat",
    "scouter:stop:win": "taskkill /F /IM java.exe /FI \"WINDOWTITLE eq *scouter*\"",

    "// ========== Scouter APM (Linux/Mac) ==========": "",
    "scouter:collector:unix": "cd scouter/server && ./startup.sh",
    "scouter:webapp:unix": "cd scouter/webapp && ./startup.sh",
    "scouter:stop:unix": "pkill -f scouter",

    "// ========== Scouter APM (Auto-detect) ==========": "",
    "scouter:collector": "node -e \"process.platform === 'win32' ? require('child_process').execSync('npm run scouter:collector:win', {stdio:'inherit'}) : require('child_process').execSync('npm run scouter:collector:unix', {stdio:'inherit'})\"",
    "scouter:webapp": "node -e \"process.platform === 'win32' ? require('child_process').execSync('npm run scouter:webapp:win', {stdio:'inherit'}) : require('child_process').execSync('npm run scouter:webapp:unix', {stdio:'inherit'})\"",
    "scouter:stop": "node -e \"process.platform === 'win32' ? require('child_process').execSync('npm run scouter:stop:win', {stdio:'inherit'}) : require('child_process').execSync('npm run scouter:stop:unix', {stdio:'inherit'})\""
  },
  "author": "Sechang Jang",
  "license": "MIT",
  "devDependencies": {
    "k6-to-junit": "^1.0.3"
  }
}
