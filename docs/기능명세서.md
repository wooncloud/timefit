# timefit 기능 명세서

## 목차
1. **문서 개요**
   1. 목적
   2. 용어 정의

2. **기능 요구사항** 
   **1. 로그인**
     1. 고객 로그인 Oauth
     **2. 업체 로그인**
     **3. 업체 회원가입 (사업자번호 필수)**
   **2. 고객 중심 기능**
     1. 예약 신청
     2. 내가 신청한 예약 조회
     3. 예약 정정
     4. 예약 취소
     <!-- 5. 예약 알림 -->
     5. 업체 조회
     6. 채팅 기능
     7. 내 정보 CRU
   3. 업체 중심 기능
     **1. 업체 정보 CRU**
     2. 예약 가능 시간 범위 설정
     3. 받은 예약 신청 조회 / 승인 / 취소
     4. 예약 상태 변경 (완료/노쇼)
     5. 예약 캘린더 조회 및 관리
     6. 고객 정보 조회
   4. 업체와 고객간의 소통
     1. 채팅방 CRU
     2. 채팅방 나가기
     3. 채팅 전송

---

## 1. 문서 개요
### 1.1 목적
    본 문서는 timefit 서비스의 MVP(Minimum Viable Product) 기능을 정의하고, 각 기능의 목적, 동작 방식, 입출력, 제약 조건을 상세히 기술합니다.

### 1.2 용어 정의
- **예약**: 고객이 특정 날짜와 시간에 업체의 서비스를 이용하기 위해 등록한 요청
- **채널**: 고객이 예약을 생성하는 다양한 경로나 플랫폼 (예: timefit 앱)
- **업체**: 예약을 받는 비즈니스 주체(병원, 식당, 미용실 등)
- **고객**: 예약을 신청하는 서비스 이용자
- **데드라인**: 예약 변경/취소가 가능한 마감 시간
- **옵션**: 예약 시 선택 가능한 메뉴, 서비스 항목 등


---

## 2. 기능 요구사항
### 2.1 고객 중심 기능

고객이 서비스를 통해 이용할 수 있는 핵심 기능들입니다.

#### 2.1.1 예약 등록

- **목적**: 고객이 원하는 업체의 서비스를 특정 날짜와 시간에 예약할 수 있습니다.
- **입력**:
    1. 업체 ID
    2. 예약 날짜
    3. 예약 시간
    4. 선택 옵션(메뉴, 서비스 등)
    5. 추가 요청사항(선택)
    6. 고객 정보(이름, 연락처)
- **처리**:
    1. 고객이 업체 검색 또는 카테고리 탐색을 통해 업체 선택
    2. 선택한 업체의 예약 가능 날짜/시간 표시
    3. 고객이 원하는 날짜와 시간 선택
    4. 업체가 설정한 옵션(메뉴, 서비스 등) 중 선택
    5. 추가 요청사항 입력(선택)
    6. 예약 정보 확인 및 제출
    7. 예약 정보 저장 및 예약 번호 생성
- **출력**:
    1. 예약 번호
    2. 예약 상태(확정, 대기 등)
    3. 예약 상세 정보(업체, 날짜, 시간, 선택 옵션)
    4. 업체 정보(위치, 연락처)
- **제약 조건**:
    1. 영업시간 및 예약 가능 시간에만 예약 가능
    2. 과거 날짜 예약 불가
    3. 동일 시간대 예약 중복 불가

#### 2.1.2 예약 확인 및 관리

- **목적**: 고객이 자신이 등록한 예약 목록을 확인하고 관리할 수 있습니다.
- **입력**:
    1. 고객 ID
    2. 검색 기간(선택)
    3. 필터링 조건(선택: 예약 상태, 업체 유형 등)
- **처리**:
    1. 고객이 '나의 예약' 메뉴 선택
    2. 예약 목록 조회 요청 처리
    3. 예약 데이터 필터링 및 정렬
    4. 목록 또는 캘린더 형태로 예약 정보 표시
    5. 특정 예약 선택 시 상세 정보 표시
- **출력**:
    1. 예약 목록(날짜, 업체, 시간, 상태 표시)
    2. 예약 상세 정보
    3. 캘린더 뷰(선택 시)
- **제약 조건**:
    1. 로그인한 사용자의 예약만 조회 가능
    2. 최근 3개월 예약이 기본 표시(더 이전 예약은 검색으로 확인)

#### 2.1.3 예약 변경 및 취소

- **목적**: 고객이 등록한 예약을 변경하거나 취소할 수 있습니다.
- **입력**:
    1. 예약 ID
    2. 변경 내용(날짜, 시간, 옵션 등)
    3. 취소 사유(선택)
- **처리**:
    1. 고객이 예약 상세 화면에서 '변경' 또는 '취소' 선택
    2. 변경의 경우, 새로운 날짜/시간/옵션 선택 화면 표시
    3. 취소의 경우, 취소 사유 입력(선택) 및 확인 절차
    4. 업체 설정 변경/취소 데드라인 확인
    5. 변경/취소 요청 처리
    6. 처리 결과 표시 및 관련 알림 발송
- **출력**:
    1. 변경/취소 처리 결과
    2. 변경된 예약 정보(변경 시)
    3. 취소 확인 메시지(취소 시)
    4. 업체에 전달된 알림 상태
- **제약 조건**:
    1. 업체별 설정된 변경/취소 데드라인 준수
    2. 동일 시간대 예약 중복 불가
    3. 취소 후 재예약은 새로운 예약으로 처리

#### 2.1.4 알림 및 캘린더 연동

- **목적**: 고객이 예약을 놓치지 않도록 알림을 제공하고, 개인 캘린더와 연동할 수 있습니다.
- **입력**:
    1. 예약 ID
    2. 연동할 캘린더 서비스 선택(구글, 애플 등)
    3. 알림 설정(시간, 활성화/비활성화)
- **처리**:
    1. 예약 완료 또는 예약 상세 화면에서 '캘린더에 추가' 선택
    2. 연동 가능한 캘린더 서비스 목록 표시
    3. 사용자 선택에 따라 외부 캘린더 API 연결
    4. 예약 정보 캘린더 이벤트로 변환하여 추가
    5. 알림 설정(기본: 예약 24시간 전, 1시간 전)
    6. 설정된 시간에 푸시 알림 발송
- **출력**:
    1. 캘린더 연동 성공/실패 상태
    2. 연동된 캘린더 이벤트 정보
    3. 알림 설정 확인 메시지
    4. 예약 임박 시 발송되는 알림 내용
- **제약 조건**:
    1. 구글 캘린더, 애플 캘린더 우선 지원
    2. 알림은 최소 15분 전부터 설정 가능
    3. 최대 3개의 알림 설정 가능

#### 2.1.5 채팅 기능

- **목적**: 고객이 전화 대신 채팅으로 업체와 소통할 수 있습니다.
- **입력**:
    1. 업체 ID
    2. 예약 ID(선택적)
    3. 메시지 내용
    4. 첨부 파일(선택)
- **처리**:
    1. 고객이 업체 페이지 또는 예약 상세에서 '채팅하기' 선택
    2. 해당 업체와의 채팅방 열기
    3. 메시지 입력 및 전송
    4. 메시지 저장 및 상대방에게 전달
    5. 읽음 상태 표시
    6. 대화 내역 저장
- **출력**:
    1. 채팅 내역(메시지 목록)
    2. 업체 응답 메시지
    3. 새 메시지 알림
    4. ~~메시지 전송 상태(전송 중, 전송됨, 읽음)~~
- **제약 조건**:
    1. 예약 고객과 업체 간에만 채팅 가능
    2. 채팅 내역은 6개월간 저장
    3. 첨부 파일은 이미지만 가능(최대 5MB)
    4. 메시지 길이 제한 500자??

### 2.2 업체 중심 기능

업체가 서비스를 통해 이용할 수 있는 핵심 기능들입니다.

#### 2.2.1 예약 시간 및 메뉴 설정

- **목적**: 업체가 예약 가능한 시간대와 고객이 선택할 수 있는 옵션(메뉴, 서비스)을 설정할 수 있습니다.
- **입력**:
    1. 영업 시간
    2. 예약 가능 시간대
    3. 슬롯 간격(15분, 30분, 1시간 등)
    4. 동시 예약 가능 수
    5. 카테고리 정보
    6. 메뉴/서비스 정보(이름, 가격, 설명, 이미지 등)
    7. 변경/취소 데드라인 설정
- **처리**:
    1. 업체 관리자 로그인 후 '설정' 메뉴 진입
    2. 영업 시간 및 예약 가능 시간 설정
    3. 카테고리 및 메뉴/서비스 옵션 설정
    4. 변경/취소 정책 설정
    5. 설정 저장 및 적용
- **출력**:
    1. 설정된 예약 가능 시간표
    2. 설정된 메뉴/서비스 목록
    3. 설정된 변경/취소 정책
    4. 설정 저장 결과 메시지
- **제약 조건**:
    1. 최소 예약 단위는 15분
    2. 카테고리 최대 10개, 카테고리별 메뉴 최대 30개
    3. 과거 날짜의 예약 시간 변경 불가

#### 2.2.2 예약 캘린더 관리

- **목적**: 업체가 모든 예약을 캘린더 형태로 확인하고 관리할 수 있도록 합니다.
- **입력**:
    1. 조회 기간
    2. 필터링 조건(예약 상태, 메뉴 등)
    3. 예약 상태 변경 정보
    4. 예약 불가 시간대 설정
- **처리**:
    1. 업체 관리자가 '예약 관리' 메뉴 선택
    2. 캘린더 뷰에서 날짜별 예약 현황 표시
    3. 특정 날짜 선택 시 시간대별 예약 목록 표시
    4. 예약 선택 시 고객 정보 및 상세 내용 표시
    5. 예약 상태 변경 또는 예약 불가 시간 설정 처리
    6. 변경 사항 저장 및 필요시 고객에게 알림
- **출력**:
    1. 날짜별/시간대별 예약 현황
    2. 예약 상세 정보
    3. 예약 상태 변경 결과
    4. 예약 불가 시간 설정 결과
    5. 고객 알림 발송 상태
- **제약 조건**:
    1. 최대 3개월 이내의 예약만 기본 캘린더에 표시
    2. 과거 예약의 상태만 변경 가능(날짜/시간 변경 불가)
    3. 예약 불가 설정 시 영향 받는 기존 예약 확인 필수

#### 2.2.3 고객 정보 관리

- **목적**: 업체가 예약 고객의 정보를 체계적으로 관리하고 활용할 수 있도록 합니다.
- **입력**:
    1. 고객 검색 조건(이름, 연락처, 방문 이력 등)
    2. 고객별 메모
    3. 고객 분류 태그
    4. 방문 이력 필터링 조건
- **처리**:
    1. 업체 관리자가 '고객 관리' 메뉴 선택
    2. 고객 검색 또는 목록 조회
    3. 특정 고객 선택 시 상세 정보 표시
    4. 고객별 메모 작성 또는 태그 설정
    5. 변경 사항 저장
    6. 고객 데이터 분석 및 인사이트 제공
- **출력**:
    1. 고객 목록(이름, 연락처, 최근 방문일 등)
    2. 고객 상세 정보(예약 이력, 선호 메뉴, 방문 빈도 등)
    3. 고객 분석 데이터(방문 빈도, 선호 서비스 등)
    4. 고객 메모 및 태그 정보
    5. 저장 결과 메시지
- **제약 조건**:
    1. 개인정보보호법에 따른 데이터 관리
    2. 고객별 메모 최대 500자
    3. 태그 최대 10개
    4. 이메일/SMS 마케팅은 고객 동의 시에만 가능

<!-- 
#### 2.2.4 예약 통계 및 인사이트

- **목적**: 업체가 예약 데이터를 분석하여 영업에 도움이 되는 인사이트를 얻을 수 있도록 합니다.
- **입력**:
    1. 분석 기간
    2. 분석 유형(예약 수, 취소율, 선호 메뉴 등)
    3. 데이터 필터링 조건
    4. 비교 기간(선택)
- **처리**:
    1. 업체 관리자가 '통계 및 분석' 메뉴 선택
    2. 원하는 분석 유형 및 기간 설정
    3. 예약 데이터 집계 및 분석
    4. 시각화된 결과 표시
    5. 인사이트 및 추천 액션 제시
    6. 필요시 데이터 내보내기
- **출력**:
    1. 통계 그래프/차트(일별, 주별, 월별 예약 추이)
    2. 분석 리포트(예약률, 취소율, 인기 메뉴 등)
    3. 추천 인사이트(예: "수요일 저녁 시간대 예약률이 가장 높습니다")
    4. 데이터 내보내기 파일(CSV, PDF 등)
- **제약 조건**:
    1. 최대 1년 데이터 분석 가능
    2. 개인정보가 제외된 형태로 분석 제공
    3. 최소 10건 이상의 예약 데이터 필요
    4. ~~상세 분석은 유료 계정에서만 사용 가능~~ -->

<!-- 
#### 2.2.5 예약 채널 통합 관리

- **목적**: 업체가 다양한 경로(전화, 웹사이트, 외부 예약 플랫폼 등)로 들어오는 예약을 통합 관리할 수 있도록 합니다.
- **입력**:
    1. 연동할 외부 예약 채널 정보
    2. 채널별 예약 정보 입력
    3. 동기화 설정
    4. 채널별 예약 가능 수량 설정
- **처리**:
    1. 업체 관리자가 '채널 관리' 메뉴 선택
    2. 외부 예약 채널 연동 설정
    3. 채널별 예약 동기화 주기 설정
    4. 수동 예약 정보 입력(전화, 방문 예약)
    5. 통합된 예약 정보 확인 및 중복 관리
    6. 채널별 예약 가능 수량 배분
- **출력**:
    1. 통합된 예약 목록
    2. 채널별 예약 현황 및 비율
    3. 동기화 상태 및 마지막 동기화 시간
    4. 오류 및 중복 알림
    5. 수동 입력된 예약 정보
- **제약 조건**:
    1. 초기 지원 채널: 네이버 예약, 카카오 예약
    2. 수동 입력 예약은 별도 표시
    3. 채널별 최대 연동 건수 제한(채널당 100건/일)
    4. 자동 동기화는 최소 15분 간격 -->

---

## 3. 개발 우선순위

### 3.1 1단계 (필수 구현)

다음 기능은 서비스의 핵심 가치를 제공하기 위해 MVP 단계에서 반드시 구현해야 합니다.

1. **예약 등록** (2.1.1)
- 고객이 업체 선택 및 날짜/시간 지정 예약
- 기본적인 예약 옵션 선택 기능

2. **예약 확인 및 관리** (2.1.2)
- 리스트 형태의 예약 목록 조회
- 예약 상세 정보 확인

3. **예약 시간 및 메뉴 설정** (2.2.1)
- 업체의 영업 시간 및 예약 가능 시간 설정
- 기본 카테고리 및 메뉴/서비스 옵션 설정

4. **예약 캘린더 관리** (2.2.2)
- 업체용 예약 현황 캘린더 뷰
- 예약 상태 변경 기능

### 3.2 2단계 (개발 여유 시 구현)

다음 기능은 서비스의 사용성을 높이기 위해 가능한 빨리 구현하는 것이 좋습니다.

1. **예약 변경 및 취소** (2.1.3)
- 고객의 예약 변경/취소 요청 처리
- 업체의 변경/취소 정책 설정

2. **알림 및 캘린더 연동** (2.1.4)
- 기본 알림 기능(푸시 알림)
- 구글 캘린더 연동

3. **고객 정보 관리** (2.2.3)
- 고객 기본 정보 조회
- 고객별 방문 이력 확인

### 3.3 3단계 (추후 업데이트)

다음 기능은 서비스의 확장성을 위해 MVP 이후 단계에서 구현합니다.

1. **채팅 기능** (2.1.5)
- 업체-고객 간 텍스트 메시지 기능
<!-- 
2. **예약 통계 및 인사이트** (2.2.4)
- 기본적인 예약 통계(일별/주별 예약 수)
- 시각화된 데이터 제공

3. **예약 채널 통합 관리** (2.2.5)
- 외부 예약 채널 연동
- 수동 예약 입력 기능 -->